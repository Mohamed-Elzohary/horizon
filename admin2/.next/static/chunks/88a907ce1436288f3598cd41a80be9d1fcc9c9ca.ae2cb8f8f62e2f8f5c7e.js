(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[17],{"4r7v":function(e,t,a){e.exports={error:"ErrorMessage_error__3ZjHd",icon:"ErrorMessage_icon__1cEeC"}},CDh1:function(e,t,a){e.exports={title:"WebsiteHeader_title__hGIb-",link:"WebsiteHeader_link__2bwZL",active:"WebsiteHeader_active__5r1FR"}},GrYM:function(e,t,a){e.exports={container:"WebsiteChart_container__3Ep77",title:"WebsiteChart_title__2cmt6",header:"WebsiteChart_header__3Gb2R",metrics:"WebsiteChart_metrics__33aMf",sticky:"WebsiteChart_sticky__1O07I",filter:"WebsiteChart_filter__2zrCT",url:"WebsiteChart_url__qWu22"}},IZIc:function(e,t,a){e.exports={loading:"Loading_loading__2pPUq",blink:"Loading_blink__1PtEJ"}},JDPv:function(e,t,a){"use strict";var c,r=a("q1tI");function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c])}return e}).apply(this,arguments)}t.a=function(e){return r.createElement("svg",n({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},e),c||(c=r.createElement("path",{d:"M216.464 36.465l-7.071 7.07c-4.686 4.686-4.686 12.284 0 16.971L387.887 239H12c-6.627 0-12 5.373-12 12v10c0 6.627 5.373 12 12 12h375.887L209.393 451.494c-4.686 4.686-4.686 12.284 0 16.971l7.071 7.07c4.686 4.686 12.284 4.686 16.97 0l211.051-211.05c4.686-4.686 4.686-12.284 0-16.971L233.434 36.465c-4.686-4.687-12.284-4.687-16.97 0z"})))}},MPiW:function(e,t,a){"use strict";a.d(t,"a",(function(){return j}));var c,r=a("nKUr"),n=a("q1tI"),s=a("kriW"),i=a("atwx");function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(e[c]=a[c])}return e}).apply(this,arguments)}var u=function(e){return n.createElement("svg",o({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 576 512"},e),c||(c=n.createElement("path",{d:"M270.2 160h35.5c3.4 0 6.1 2.8 6 6.2l-7.5 196c-.1 3.2-2.8 5.8-6 5.8h-20.5c-3.2 0-5.9-2.5-6-5.8l-7.5-196c-.1-3.4 2.6-6.2 6-6.2zM288 388c-15.5 0-28 12.5-28 28s12.5 28 28 28 28-12.5 28-28-12.5-28-28-28zm281.5 52L329.6 24c-18.4-32-64.7-32-83.2 0L6.5 440c-18.4 31.9 4.6 72 41.6 72H528c36.8 0 60-40 41.5-72zM528 480H48c-12.3 0-20-13.3-13.9-24l240-416c6.1-10.6 21.6-10.7 27.7 0l240 416c6.2 10.6-1.5 24-13.8 24z"})))},l=a("4r7v"),b=a.n(l);function j(){return Object(r.jsxs)("div",{className:b.a.error,children:[Object(r.jsx)(i.a,{icon:Object(r.jsx)(u,{}),className:b.a.icon,size:"large"}),Object(r.jsx)(s.a,{id:"message.failure",defaultMessage:"Something went wrong."})]})}},OiYy:function(e,t,a){"use strict";a.d(t,"a",(function(){return Q}));var c=a("nKUr"),r=a("cpVT"),n=a("xvhg"),s=a("q1tI"),i=a("TSYQ"),o=a.n(i),u=a("rqNM"),l=a("kriW"),b=a("hnLT"),j=a("MPiW"),d=a("0Kmt"),v=a("G8Ct"),O=a("y4Yb"),f=a("bzoS"),h=a("GGPy"),p=a("YSmr"),g=a("NgRG"),m=a("l+P1"),x=a.n(m);function w(e){var t=e.websiteId,a=e.className,i=Object(f.a)(),u=Object(v.a)(t),m=Object(n.a)(u,1)[0],w=m.startDate,_=m.endDate,y=m.modified,k=Object(s.useState)(!0),N=k[0],M=k[1],I=Object(O.a)().query.url,P=Object(d.a)("/api/website/".concat(t,"/stats"),{params:{start_at:+w,end_at:+_,url:I},headers:Object(r.a)({},p.r,null===i||void 0===i?void 0:i.token)},[I,y]),C=P.data,D=P.error,E=P.loading,q=N?function(e){return e>=0?Object(h.a)(e):"-".concat(Object(h.a)(Math.abs(e)))}:h.b;var L=C||{},S=L.pageviews,T=L.uniques,W=L.bounces,z=L.totaltime,R=Math.min(C&&T.value,C&&W.value),Y=C&&{pageviews:S.value-S.change,uniques:T.value-T.change,bounces:W.value-W.change,totaltime:z.value-z.change};return Object(c.jsxs)("div",{className:o()(x.a.bar,a),onClick:function(){M((function(e){return!e}))},children:[!C&&E&&Object(c.jsx)(b.a,{}),D&&Object(c.jsx)(j.a,{}),C&&!D&&Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(g.a,{label:Object(c.jsx)(l.a,{id:"metrics.views",defaultMessage:"Views"}),value:S.value,change:S.change,format:q}),Object(c.jsx)(g.a,{label:Object(c.jsx)(l.a,{id:"metrics.visitors",defaultMessage:"Visitors"}),value:T.value,change:T.change,format:q}),Object(c.jsx)(g.a,{label:Object(c.jsx)(l.a,{id:"metrics.bounce-rate",defaultMessage:"Bounce rate"}),value:T.value?R/T.value*100:0,change:T.value&&T.change&&R/T.value*100-Math.min(Y.uniques,Y.bounces)/Y.uniques*100||0,format:function(e){return Number(e).toFixed(0)+"%"},reverseColors:!0}),Object(c.jsx)(g.a,{label:Object(c.jsx)(l.a,{id:"metrics.average-visit-time",defaultMessage:"Average visit time"}),value:z.value&&S.value?z.value/(S.value-W.value):0,change:z.value&&S.value&&-1*(Y.totaltime/(Y.pageviews-Y.bounces)-z.value/(S.value-W.value))||0,format:function(e){return"".concat(e<0?"-":"").concat(Object(h.c)(Math.abs(~~e),["m","s"]," "))}})]})]})}var _=a("pjx/"),y=a("tfvX"),k=a("/MKj"),N=a("nn0s"),M=a("4qaV"),I=a("D/21"),P=a("1ETy"),C=a("rIuf"),D=a("nsFc");var E=function(e){var t=e.websiteId,a=Object(k.b)(),r=Object(D.a)().locale,i=Object(v.a)(t),o=Object(n.a)(i,1)[0],u=Object(s.useState)(!1),b=u[0],j=u[1],d=Object(k.c)((function(e){return e.queries["/api/website/".concat(t,"/stats")]}));return Object(s.useEffect)((function(){j(!1)}),[d]),Object(c.jsx)(M.a,{icon:b?Object(c.jsx)(P.a,{}):Object(c.jsx)(I.a,{}),tooltip:Object(c.jsx)(l.a,{id:"label.refresh",defaultMessage:"Refresh"}),tooltipId:"button-refresh",size:"small",onClick:function(){o&&(j(!0),a(Object(N.b)(t,Object(C.d)(o.value,r))))}})},q=a("TOCn"),L=a("ZJFB"),S=a("ty6r"),T=a("u605"),W=a.n(T);function z(e){var t=e.websiteId,a=e.className,n=Object(f.a)(),i=Object(d.a)("/api/website/".concat(t,"/active"),{interval:6e4,headers:Object(r.a)({},p.r,null===n||void 0===n?void 0:n.token)}).data,u=Object(s.useMemo)((function(){var e;return(null===i||void 0===i||null===(e=i[0])||void 0===e?void 0:e.x)||0}),[i]);return 0===u?null:Object(c.jsxs)("div",{className:o()(W.a.container,a),children:[Object(c.jsx)(S.a,{}),Object(c.jsx)("div",{className:W.a.text,children:Object(c.jsx)("div",{children:Object(c.jsx)(l.a,{id:"message.active-users",defaultMessage:"{x} current {x, plural, one {visitor} other {visitors}}",values:{x:u}})})})]})}var R=a("JDPv"),Y=a("CDh1"),G=a.n(Y);function H(e){var t=e.websiteId,a=e.title,r=e.domain,n=e.showLink,s=void 0!==n&&n,i=s?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(L.a,{domain:r}),Object(c.jsx)(_.a,{href:"/website/[...id]",as:"/website/".concat(t,"/").concat(a),children:a})]}):Object(c.jsxs)("div",{children:[Object(c.jsx)(L.a,{domain:r}),a]});return Object(c.jsxs)(y.a,{children:[Object(c.jsx)("div",{className:G.a.title,children:i}),Object(c.jsx)(z,{className:G.a.active,websiteId:t}),Object(c.jsxs)(q.a,{align:"right",children:[Object(c.jsx)(E,{websiteId:t}),s&&Object(c.jsx)(_.a,{href:"/website/[...id]",as:"/website/".concat(t,"/").concat(a),className:G.a.link,icon:Object(c.jsx)(R.a,{}),size:"small",iconRight:!0,children:Object(c.jsx)(l.a,{id:"label.view-details",defaultMessage:"View details"})})]})]})}var K=a("NC3K");function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,c)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(Object(a),!0).forEach((function(t){Object(r.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function J(e){var t,a=e.className,n=e.stickyClassName,i=e.stickyStyle,u=e.children,l=e.enabled,b=void 0===l||l,j=Object(s.useState)(!1),d=j[0],v=j[1],O=Object(s.useRef)(),f=Object(s.useRef)(0);return Object(s.useEffect)((function(){var e=function(){if(O.current){f.current||(f.current=O.current.offsetTop+O.current.offsetHeight);var e=window.pageYOffset>f.current;d!==e&&v(e)}};return e(),b&&window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[d,b]),Object(c.jsx)("div",{ref:O,"data-sticky":d,className:o()(a,Object(r.a)({},n,d)),style:d?F(F({},i),{},{width:null===O||void 0===O||null===(t=O.current)||void 0===t?void 0:t.clientWidth}):null,children:u})}var A=a("TdLA"),V=a("InOs"),B=a("GrYM"),Z=a.n(B);function Q(e){var t=e.websiteId,a=e.title,i=e.domain,l=e.stickyHeader,b=void 0!==l&&l,h=e.showLink,g=void 0!==h&&h,m=e.hideChart,x=void 0!==m&&m,_=e.onDataLoad,y=void 0===_?function(){}:_,k=Object(f.a)(),N=Object(v.a)(t),M=Object(n.a)(N,2),I=M[0],P=M[1],D=I.startDate,E=I.endDate,q=I.unit,L=I.value,S=I.modified,T=Object(A.a)(),W=Object(n.a)(T,1)[0],z=Object(O.a)(),R=z.router,Y=z.resolve,G=z.query.url,U=Object(d.a)("/api/website/".concat(t,"/pageviews"),{params:{start_at:+D,end_at:+E,unit:q,tz:W,url:G},onDataLoad:y,headers:Object(r.a)({},p.r,null===k||void 0===k?void 0:k.token)},[G,S]),F=U.data,V=U.loading,B=U.error,Q=Object(s.useMemo)((function(){return F?{pageviews:Object(C.b)(F.pageviews,D,E,q),sessions:Object(C.b)(F.sessions,D,E,q)}:{pageviews:[],sessions:[]}}),[F]);return Object(c.jsxs)("div",{className:Z.a.container,children:[Object(c.jsx)(H,{websiteId:t,title:a,domain:i,showLink:g}),Object(c.jsx)("div",{className:o()(Z.a.header,"row"),children:Object(c.jsxs)(J,{className:o()(Z.a.metrics,"col row"),stickyClassName:Z.a.sticky,enabled:b,children:[G&&Object(c.jsx)(X,{url:G,onClick:function(){R.push(Y({url:void 0}))}}),Object(c.jsx)("div",{className:"col-12 col-lg-9",children:Object(c.jsx)(w,{websiteId:t})}),Object(c.jsx)("div",{className:o()(Z.a.filter,"col-12 col-lg-3"),children:Object(c.jsx)(K.a,{value:L,startDate:D,endDate:E,onChange:P})})]})}),Object(c.jsx)("div",{className:"row",children:Object(c.jsxs)("div",{className:"col",children:[B&&Object(c.jsx)(j.a,{}),!x&&Object(c.jsx)(u.a,{websiteId:t,data:Q,unit:q,records:Object(C.c)(D,E,q),loading:V})]})})]})}var X=function(e){var t=e.url,a=e.onClick;return Object(c.jsx)("div",{className:o()(Z.a.url,"col-12"),children:Object(c.jsx)(M.a,{icon:Object(c.jsx)(V.a,{}),onClick:a,variant:"action",iconRight:!0,children:t})})}},bzoS:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var c=a("vJKn"),r=a.n(c),n=a("rg98"),s=a("q1tI"),i=a("/MKj"),o=a("20a2"),u=a("jeBt"),l=a("DzNn");function b(e){var t=Object(o.useRouter)().basePath,a=Object(i.b)(),c=Object(i.c)((function(e){return e.app.shareToken}));function b(){return(b=Object(n.a)(r.a.mark((function e(c){var n,s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.b)("".concat(t,"/api/share/").concat(c));case 2:n=e.sent,(s=n.data)&&a(Object(l.d)(s));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){e&&function(e){b.apply(this,arguments)}(e)}),[e]),c}},hnLT:function(e,t,a){"use strict";var c=a("nKUr"),r=(a("q1tI"),a("TSYQ")),n=a.n(r),s=a("IZIc"),i=a.n(s);t.a=function(e){var t=e.className;return Object(c.jsxs)("div",{className:n()(i.a.loading,t),children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{})]})}},"l+P1":function(e,t,a){e.exports={bar:"MetricsBar_bar__Tmn6-"}},u605:function(e,t,a){e.exports={container:"ActiveUsers_container__21JqF",text:"ActiveUsers_text__6F-2f",value:"ActiveUsers_value__1HMGv"}},y4Yb:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var c=a("cpVT"),r=a("xvhg"),n=a("q1tI"),s=a("20a2"),i=a("7T8v");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,c)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(){var e=Object(s.useRouter)(),t=location,a=t.pathname,c=t.search,o=Object(n.useMemo)((function(){return c?c.substring(1).split("&").reduce((function(e,t){var a=t.split("="),c=Object(r.a)(a,2),n=c[0],s=c[1];return e[n]=decodeURIComponent(s),e}),{}):{}}),[c]);return{pathname:a,query:o,resolve:function(t){var a=Object(i.b)(u(u({},o),t)),c=e.asPath;return"".concat(c.split("?")[0]).concat(a)},router:e}}},yR7V:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var c=a("nKUr"),r=a("cpVT"),n=a("xvhg"),s=a("q1tI"),i=a("Zss7"),o=a.n(i),u=a("FoJg"),l=a("rIuf"),b=a("0Kmt"),j=a("G8Ct"),d=a("TdLA"),v=a("y4Yb"),O=a("bzoS"),f=a("YSmr");function h(e){var t=e.websiteId,a=e.className,i=e.token,h=Object(j.a)(t),p=Object(n.a)(h,1)[0],g=p.startDate,m=p.endDate,x=p.unit,w=p.modified,_=Object(d.a)(),y=Object(n.a)(_,1)[0],k=Object(v.a)().query,N=Object(O.a)(),M=Object(b.a)("/api/website/".concat(t,"/events"),{params:{start_at:+g,end_at:+m,unit:x,tz:y,url:k.url,token:i},headers:Object(r.a)({},f.r,null===N||void 0===N?void 0:N.token)},[w]),I=M.data,P=M.loading,C=Object(s.useMemo)((function(){if(!I)return[];if(P)return I;var e=I.reduce((function(e,t){var a=t.x,c=t.t,r=t.y;return e[a]||(e[a]=[]),e[a].push({t:c,y:r}),e}),{});return Object.keys(e).forEach((function(t){e[t]=Object(l.b)(e[t],g,m,x)})),Object.keys(e).map((function(t,a){var c=o()(f.i[a%f.i.length]);return{label:t,data:e[t],lineTension:0,backgroundColor:c.setAlpha(.6).toRgbString(),borderColor:c.setAlpha(.7).toRgbString(),borderWidth:1}}))}),[I,P]);return I?Object(c.jsx)(u.a,{chartId:"events-".concat(t),className:a,datasets:C,unit:x,height:300,records:Object(l.c)(g,m,x),onUpdate:function(e){e.data.datasets=C,e.update()},loading:P,stacked:!0}):null}}}]);