(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[19],{"1Hia":function(e,t,r){e.exports={container:"MetricsTable_container__29C5R",footer:"MetricsTable_footer__1jNaM"}},"3uMc":function(e,t,r){e.exports={container:"MenuLayout_container__1x3Sb",menu:"MenuLayout_menu__2KwAG",content:"MenuLayout_content__2bQ0C"}},"9vU2":function(e,t,r){e.exports={menu:"NavMenu_menu__2CwIk",option:"NavMenu_option__A3zuK",selected:"NavMenu_selected__2JKVl"}},JHGC:function(e,t,r){e.exports={chart:"WebsiteDetails_chart__3DK0V",view:"WebsiteDetails_view__20wIW",menu:"WebsiteDetails_menu__1jVSy",content:"WebsiteDetails_content__18XQ8",backButton:"WebsiteDetails_backButton__3o-Lq",hidden:"WebsiteDetails_hidden__3Cv0n",eventschart:"WebsiteDetails_eventschart__i8Q8B"}},bADD:function(e,t,r){e.exports={filter:"EventsTable_filter__1ZnWF"}},hNIe:function(e,t,r){"use strict";r.d(t,"a",(function(){return xe}));var c=r("nKUr"),n=r("cpVT"),a=r("q1tI"),s=r("kriW"),i=r("TSYQ"),o=r.n(i),b=r("OiYy"),l=r("sjKz"),j=r("CUtM"),O=r("FtD2"),u=r("sgb8"),d=r("pjx/"),f=r("hnLT"),p=r("JDPv"),v=r("JHGC"),m=r.n(v),w=r("dhJC"),y=r("YFqc"),g=r.n(y),x=r("2K+N"),h=r("GyfN"),P=r("y4Yb"),D=r("xvhg"),_=r("zsrT"),M=r.n(_),I=r("0Kmt"),N=r("G8Ct"),S=r("bzoS"),k=r("MPiW"),E=r("vX6h"),L=r("YSmr"),F=r("1Hia"),C=r.n(F);function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,c)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function V(e){var t=e.websiteId,r=e.type,i=e.className,b=e.dataFilter,l=e.filterOptions,j=e.limit,O=e.onDataLoad,u=Object(w.a)(e,["websiteId","type","className","dataFilter","filterOptions","limit","onDataLoad"]),v=Object(S.a)(),m=Object(N.a)(t),y=Object(D.a)(m,1)[0],g=y.startDate,x=y.endDate,_=y.modified,F=Object(P.a)(),R=F.resolve,V=F.router,W=F.query.url,B=Object(I.a)("/api/website/".concat(t,"/metrics"),{params:{type:r,start_at:+g,end_at:+x,url:W},onDataLoad:O,delay:L.c,headers:Object(n.a)({},L.r,null===v||void 0===v?void 0:v.token)},[_]),U=B.data,A=B.loading,K=B.error,z=Object(a.useMemo)((function(){if(U){var e=Object(h.c)(b?b(U,l):U);return j?e.filter((function(e,t){return t<j})).sort(M()("y",-1).thenBy("x")):e.sort(M()("y",-1).thenBy("x"))}return[]}),[U,K,b,l]);return Object(c.jsxs)("div",{className:o()(C.a.container,i),children:[!U&&A&&Object(c.jsx)(f.a,{}),K&&Object(c.jsx)(k.a,{}),U&&!K&&Object(c.jsx)(E.a,T(T({},u),{},{data:z,className:i})),Object(c.jsx)("div",{className:C.a.footer,children:U&&!K&&j&&Object(c.jsx)(d.a,{icon:Object(c.jsx)(p.a,{}),href:V.pathname,as:R({view:r}),size:"small",iconRight:!0,children:Object(c.jsx)(s.a,{id:"label.more",defaultMessage:"More"})})})]})}var W=r("s8jR"),B=r.n(W);function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,c)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function K(e){var t=e.websiteId,r=e.websiteDomain,i=e.showFilters,b=Object(w.a)(e,["websiteId","websiteDomain","showFilters"]),l=Object(a.useState)(0),j=l[0],O=l[1],u=Object(P.a)(),d=u.resolve,f=u.query.url,p=[{label:Object(c.jsx)(s.a,{id:"metrics.filter.combined",defaultMessage:"Combined"}),value:0},{label:Object(c.jsx)(s.a,{id:"metrics.filter.raw",defaultMessage:"Raw"}),value:1}];return Object(c.jsxs)(c.Fragment,{children:[i&&Object(c.jsx)(x.a,{buttons:p,selected:j,onClick:O}),Object(c.jsx)(V,A({title:Object(c.jsx)(s.a,{id:"metrics.pages",defaultMessage:"Pages"}),type:"url",metric:Object(c.jsx)(s.a,{id:"metrics.views",defaultMessage:"Views"}),websiteId:t,dataFilter:h.e,filterOptions:{domain:r,raw:1===j},renderLabel:function(e){var t,r=e.x;return Object(c.jsx)(g.a,{href:d({url:r}),replace:!0,children:Object(c.jsx)("a",{className:o()((t={},Object(n.a)(t,B.a.inactive,f&&r!==f),Object(n.a)(t,B.a.active,r===f),t)),children:decodeURI(r)})})}},b))]})}function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,c)}return r}function J(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function q(e){var t=e.websiteId,r=e.websiteDomain,n=e.showFilters,i=Object(w.a)(e,["websiteId","websiteDomain","showFilters"]),o=Object(a.useState)(1),b=o[0],l=o[1],j=[{label:Object(c.jsx)(s.a,{id:"metrics.filter.domain-only",defaultMessage:"Domain only"}),value:0},{label:Object(c.jsx)(s.a,{id:"metrics.filter.combined",defaultMessage:"Combined"}),value:1},{label:Object(c.jsx)(s.a,{id:"metrics.filter.raw",defaultMessage:"Raw"}),value:2}];return Object(c.jsxs)(c.Fragment,{children:[n&&Object(c.jsx)(x.a,{buttons:j,selected:b,onClick:l}),Object(c.jsx)(V,J(J({},i),{},{title:Object(c.jsx)(s.a,{id:"metrics.referrers",defaultMessage:"Referrers"}),type:"referrer",metric:Object(c.jsx)(s.a,{id:"metrics.views",defaultMessage:"Views"}),websiteId:t,dataFilter:h.d,filterOptions:{domain:r,domainOnly:0===b,raw:2===b},renderLabel:function(e){var t=e.w,r=e.x;return(t||r).startsWith("http")?Object(c.jsx)("a",{href:t||r,target:"_blank",rel:"noreferrer",children:decodeURI(r)}):decodeURI(r)}}))]})}function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,c)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e){var t=e.websiteId,r=Object(w.a)(e,["websiteId"]);return Object(c.jsx)(V,Q(Q({},r),{},{title:Object(c.jsx)(s.a,{id:"metrics.browsers",defaultMessage:"Browsers"}),type:"browser",metric:Object(c.jsx)(s.a,{id:"metrics.visitors",defaultMessage:"Visitors"}),websiteId:t,dataFilter:h.a}))}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,c)}return r}function X(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Z(e){var t=e.websiteId,r=Object(w.a)(e,["websiteId"]);return Object(c.jsx)(V,X(X({},r),{},{title:Object(c.jsx)(s.a,{id:"metrics.operating-systems",defaultMessage:"Operating system"}),type:"os",metric:Object(c.jsx)(s.a,{id:"metrics.visitors",defaultMessage:"Visitors"}),websiteId:t}))}var $=r("m/GJ");function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,c)}return r}function te(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function re(e){var t=e.websiteId,r=Object(w.a)(e,["websiteId"]);return Object(c.jsx)(V,te(te({},r),{},{title:Object(c.jsx)(s.a,{id:"metrics.devices",defaultMessage:"Devices"}),type:"device",metric:Object(c.jsx)(s.a,{id:"metrics.visitors",defaultMessage:"Visitors"}),websiteId:t,renderLabel:function(e){var t=e.x;return Object($.b)(t)}}))}var ce=r("LAde"),ne=r("nsFc");function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,c)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ie(e){var t=e.websiteId,r=e.onDataLoad,n=Object(w.a)(e,["websiteId","onDataLoad"]),a=Object(ne.a)().locale,i=Object(ce.a)(a);return Object(c.jsx)(V,se(se({},n),{},{title:Object(c.jsx)(s.a,{id:"metrics.countries",defaultMessage:"Countries"}),type:"country",metric:Object(c.jsx)(s.a,{id:"metrics.visitors",defaultMessage:"Visitors"}),websiteId:t,onDataLoad:function(e){return null===r||void 0===r?void 0:r(Object(h.c)(e))},renderLabel:function(e){var t,r=e.x;return Object(c.jsx)("div",{className:a,children:null!==(t=i[r])&&void 0!==t?t:Object(c.jsx)(s.a,{id:"label.unknown",defaultMessage:"Unknown"})})}}))}var oe=r("z7pX"),be=r("fFFQ"),le=r("dB/W"),je=r("bADD"),Oe=r.n(je);function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,c)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var fe={value:"EVENT_FILTER_DEFAULT",label:Object(c.jsx)(s.a,{id:"label.all-events",defaultMessage:"All events"})};function pe(e){var t=e.websiteId,r=Object(w.a)(e,["websiteId"]),n=Object(a.useState)(fe.value),i=n[0],o=n[1],b=Object(a.useState)([]),l=b[0],j=b[1],O=[fe].concat(Object(oe.a)(l.map((function(e){return{value:e,label:e}}))));return Object(c.jsxs)(c.Fragment,{children:[(null===l||void 0===l?void 0:l.length)>1&&Object(c.jsx)("div",{className:Oe.a.filter,children:Object(c.jsx)(le.a,{value:i,options:O,onChange:o})}),Object(c.jsx)(V,de(de({},r),{},{title:Object(c.jsx)(s.a,{id:"metrics.events",defaultMessage:"Events"}),type:"event",metric:Object(c.jsx)(s.a,{id:"metrics.actions",defaultMessage:"Actions"}),websiteId:t,dataFilter:h.b,filterOptions:i===fe.value?[]:[i],renderLabel:function(e){var t=e.x;return Object(c.jsx)(ve,{value:t})},onDataLoad:function(e){var t;j(Object(oe.a)(new Set(e.map((function(e){return e.x.split("\t")[0]}))))),null===(t=r.onDataLoad)||void 0===t||t.call(r,e)}}))]})}var ve=function(e){var t=e.value.split("\t"),r=Object(D.a)(t,2),n=r[0],a=r[1];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(be.a,{children:n}),a]})},me=r("yR7V");function we(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);t&&(c=c.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,c)}return r}function ye(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?we(Object(r),!0).forEach((function(t){Object(n.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):we(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ge={url:K,referrer:q,browser:Y,os:Z,device:re,country:ie,event:pe};function xe(e){var t=e.websiteId,r=Object(S.a)(),i=Object(I.a)("/api/website/".concat(t),{headers:Object(n.a)({},L.r,null===r||void 0===r?void 0:r.token)}).data,v=Object(a.useState)(!1),w=v[0],y=v[1],g=Object(a.useState)(),x=g[0],h=g[1],D=Object(a.useState)(),_=D[0],M=D[1],N=Object(P.a)(),k=N.resolve,E=N.query.view,F=[{render:function(){return Object(c.jsx)("div",{className:m.a.backButton,children:Object(c.jsx)(d.a,{href:k({view:void 0}),icon:Object(c.jsx)(p.a,{}),size:"small",children:Object(c.jsx)(s.a,{id:"label.back",defaultMessage:"Back"})},"back-button")},"back-button")}},{label:Object(c.jsx)(s.a,{id:"metrics.pages",defaultMessage:"Pages"}),value:k({view:"url"})},{label:Object(c.jsx)(s.a,{id:"metrics.referrers",defaultMessage:"Referrers"}),value:k({view:"referrer"})},{label:Object(c.jsx)(s.a,{id:"metrics.browsers",defaultMessage:"Browsers"}),value:k({view:"browser"})},{label:Object(c.jsx)(s.a,{id:"metrics.operating-systems",defaultMessage:"Operating system"}),value:k({view:"os"})},{label:Object(c.jsx)(s.a,{id:"metrics.devices",defaultMessage:"Devices"}),value:k({view:"device"})},{label:Object(c.jsx)(s.a,{id:"metrics.countries",defaultMessage:"Countries"}),value:k({view:"country"})},{label:Object(c.jsx)(s.a,{id:"metrics.events",defaultMessage:"Events"}),value:k({view:"event"})}],C={websiteId:t,websiteDomain:null===i||void 0===i?void 0:i.domain,limit:10},R=ge[E];return i?Object(c.jsxs)(j.a,{children:[Object(c.jsx)("div",{className:"row",children:Object(c.jsx)("div",{className:o()(m.a.chart,"col"),children:Object(c.jsx)(b.a,{websiteId:t,title:i.name,domain:i.domain,onDataLoad:function(){w||setTimeout((function(){return y(!0)}),L.c)},showLink:!1,stickyHeader:!0})})}),!w&&Object(c.jsx)(f.a,{}),w&&!E&&Object(c.jsxs)(O.c,{children:[Object(c.jsxs)(O.b,{children:[Object(c.jsx)(O.a,{md:12,lg:6,children:Object(c.jsx)(K,ye({},C))}),Object(c.jsx)(O.a,{md:12,lg:6,children:Object(c.jsx)(q,ye({},C))})]}),Object(c.jsxs)(O.b,{children:[Object(c.jsx)(O.a,{md:12,lg:4,children:Object(c.jsx)(Y,ye({},C))}),Object(c.jsx)(O.a,{md:12,lg:4,children:Object(c.jsx)(Z,ye({},C))}),Object(c.jsx)(O.a,{md:12,lg:4,children:Object(c.jsx)(re,ye({},C))})]}),Object(c.jsxs)(O.b,{children:[Object(c.jsx)(O.a,{xs:12,md:12,lg:8,children:Object(c.jsx)(l.a,{data:x})}),Object(c.jsx)(O.a,{xs:12,md:12,lg:4,children:Object(c.jsx)(ie,ye(ye({},C),{},{onDataLoad:h}))})]}),Object(c.jsxs)(O.b,{className:o()(Object(n.a)({},m.a.hidden,!(null!==_&&void 0!==_&&_.length)>0)),children:[Object(c.jsx)(O.a,{xs:12,md:12,lg:4,children:Object(c.jsx)(pe,ye(ye({},C),{},{onDataLoad:M}))}),Object(c.jsx)(O.a,{xs:12,md:12,lg:8,children:Object(c.jsx)(me.a,{className:m.a.eventschart,websiteId:t})})]})]}),E&&w&&Object(c.jsx)(u.a,{className:m.a.view,menuClassName:m.a.menu,contentClassName:m.a.content,menu:F,children:Object(c.jsx)(R,ye(ye({},C),{},{height:500,limit:!1,animte:!1,showFilters:!0,virtualize:!0}))})]}):null}},s8jR:function(e,t,r){e.exports={inactive:"PagesTable_inactive__1k7lx",active:"PagesTable_active__1i2ZA"}},sgb8:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var c=r("nKUr"),n=(r("q1tI"),r("20a2")),a=r("TSYQ"),s=r.n(a),i=r("cpVT"),o=r("9vU2"),b=r.n(o);var l=function(e){var t=e.options,r=void 0===t?[]:t,a=e.className,o=e.onSelect,l=void 0===o?function(){}:o,j=Object(n.useRouter)();return Object(c.jsx)("div",{className:s()(b.a.menu,a),children:r.filter((function(e){return!e.hidden})).map((function(e){var t=e.label,r=e.value,n=e.className,a=e.render;return a?a(e):Object(c.jsx)("div",{className:s()(b.a.option,n,Object(i.a)({},b.a.selected,j.asPath===r)),onClick:function(e){return l(r,e)},children:t},r)}))})},j=r("3uMc"),O=r.n(j);function u(e){var t=e.menu,r=e.selectedOption,a=e.className,i=e.menuClassName,o=e.contentClassName,b=e.children,j=e.replace,u=void 0!==j&&j,d=Object(n.useRouter)();return Object(c.jsxs)("div",{className:s()(O.a.container,a,"row"),children:[Object(c.jsx)(l,{options:t,selectedOption:r,className:s()(O.a.menu,i,"col-12 col-lg-2"),onSelect:function(e){u?d.replace(e):d.push(e)}}),Object(c.jsx)("div",{className:s()(O.a.content,o,"col-12 col-lg-10"),children:b})]})}}}]);