{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[29],{IA1E:function(e,t,r){\"use strict\";r.d(t,\"a\",(function(){return d}));var n=r(\"vJKn\"),a=r.n(n),s=r(\"rg98\"),i=r(\"q1tI\"),c=r(\"/MKj\"),o=r(\"j6IE\"),l=r(\"20a2\"),u=r(\"jeBt\");function d(){var e=Object(l.useRouter)(),t=Object(c.b)(),r=Object(c.c)((function(e){return e.user})),n=Object(i.useState)(!r),d=n[0],b=n[1],j=Object(i.useState)(r),O=j[0],f=j[1];function v(){return(v=Object(s.a)(a.a.mark((function r(){var n,s,i;return a.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return b(!0),r.next=3,Object(u.b)(\"\".concat(e.basePath,\"/api/auth/verify\"));case 3:if(n=r.sent,s=n.ok,i=n.data,s){r.next=8;break}return r.abrupt(\"return\",e.push(\"/login\"));case 8:return r.next=10,t(Object(o.b)(i));case 10:f(O),b(!1);case 12:case\"end\":return r.stop()}}),r)})))).apply(this,arguments)}return Object(i.useEffect)((function(){!d&&O||function(){v.apply(this,arguments)}()}),[]),{user:O,loading:d}}},POTn:function(e,t,r){e.exports={metrics:\"RealtimeHeader_metrics__3UCe2\"}},Z2iK:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/analysis/realtime\",function(){return r(\"j4r0\")}])},cNLv:function(e,t,r){e.exports={table:\"RealtimeLog_table__2Tl9b\",header:\"RealtimeLog_header__2LeBZ\",row:\"RealtimeLog_row__1a7u4\",body:\"RealtimeLog_body__3dkV9\",icon:\"RealtimeLog_icon__3aQPX\",time:\"RealtimeLog_time__PHd3a\",website:\"RealtimeLog_website__1eqHT\",detail:\"RealtimeLog_detail__2LyTK\",link:\"RealtimeLog_link__2ni65\"}},j4r0:function(e,t,r){\"use strict\";r.r(t),r.d(t,\"default\",(function(){return ge}));var n=r(\"nKUr\"),a=r(\"q1tI\"),s=r(\"80PL\"),i=r(\"cpVT\"),c=r(\"kriW\"),o=r(\"/h9T\"),l=r(\"IYaI\"),u=r(\"jIYg\");function d(e,t){Object(u.a)(2,arguments);var r=Object(o.a)(t);return Object(l.a)(e,-r)}var b=r(\"0LOL\"),j=r(\"zsrT\"),O=r.n(j),f=r(\"CUtM\"),v=r(\"FtD2\"),m=r(\"dhJC\"),h=r(\"4+6U\"),g=r(\"sWYD\"),x=r(\"dndX\"),_=r(\"rqNM\"),p=r(\"rIuf\"),w=r(\"YSmr\");function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e){var t=0,r=[];return e.reduce((function(e,n){var a=n.created_at,s=Object(b.a)(Object(h.a)(a));return s.getTime()>t?(e={t:Object(g.a)(s,\"yyyy-LL-dd HH:mm:00\"),y:1},r.push(e),t=s):e.y+=1,e}),{}),r}function P(e){var t=e.data,r=e.unit,s=Object(m.a)(e,[\"data\",\"unit\"]),i=Object(b.a)(new Date),c=d(i,w.n),o=Object(a.useRef)(i),l=Object(a.useMemo)((function(){return t?{pageviews:Object(p.b)(N(t.pageviews),c,i,r),sessions:Object(p.b)(N(t.sessions),c,i,r)}:{pageviews:[],sessions:[]}}),[t]),u=Object(a.useMemo)((function(){return Object(x.a)(o.current,i)?(o.current=i,0):w.c}),[t]);return Object(n.jsx)(_.a,M(M({},s),{},{height:200,unit:r,data:l,animationDuration:u}))}var L,E=r(\"z7pX\"),R=r(\"dDsW\"),H=r(\"iR1w\"),k=r(\"atwx\"),D=r(\"fFFQ\"),C=r(\"ty6r\"),S=r(\"2K+N\"),I=r(\"ZzUg\"),T=r(\"m/GJ\"),z=r(\"nsFc\"),U=r(\"LAde\");function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var F,K=function(e){return a.createElement(\"svg\",V({xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 320 512\"},e),L||(L=a.createElement(\"path\",{d:\"M296 160H180.6l42.6-129.8C227.2 15 215.7 0 200 0H56C44 0 33.8 8.9 32.2 20.8l-32 240C-1.7 275.2 9.5 288 24 288h118.7L96.6 482.5c-3.6 15.2 8 29.5 23.3 29.5 8.4 0 16.4-4.4 20.8-12l176-304c9.3-15.9-2.2-36-20.7-36z\"})))};function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var X,A=function(e){return a.createElement(\"svg\",W({xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 448 512\"},e),F||(F=a.createElement(\"path\",{d:\"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z\"})))};function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Y,Z=function(e){return a.createElement(\"svg\",B({xmlns:\"http://www.w3.org/2000/svg\",viewBox:\"0 0 576 512\"},e),X||(X=a.createElement(\"path\",{d:\"M288 144a110.94 110.94 0 00-31.24 5 55.4 55.4 0 017.24 27 56 56 0 01-56 56 55.4 55.4 0 01-27-7.24A111.71 111.71 0 10288 144zm284.52 97.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 000 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 000-29.19zM288 400c-98.65 0-189.09-55-237.93-144C98.91 167 189.34 112 288 112s189.09 55 237.93 144C477.1 345 386.66 400 288 400z\"})))},G=r(\"GGPy\"),J=r(\"cNLv\"),q=r.n(J),Q=(Y={},Object(i.a)(Y,1,Object(n.jsx)(Z,{})),Object(i.a)(Y,2,Object(n.jsx)(A,{})),Object(i.a)(Y,3,Object(n.jsx)(K,{})),Y);function $(e){var t=e.data,r=e.websites,s=e.websiteId,i=Object(R.a)(),o=Object(z.a)().locale,l=Object(U.a)(o),u=Object(a.useState)(0),d=u[0],b=u[1],j=Object(a.useMemo)((function(){var e=t.pageviews,r=t.sessions,n=t.events,a=[].concat(Object(E.a)(e),Object(E.a)(r),Object(E.a)(n)).sort(O()(\"created_at\",-1));return d?a.filter((function(e){return m(e)===d})):a}),[t,d]),f=Object(a.useMemo)((function(){return t.sessions.reduce((function(e,t){var r=t.session_id,n=t.session_uuid;return e[r]=n,e}),{})}),[t]),v=[{label:Object(n.jsx)(c.a,{id:\"label.all\",defaultMessage:\"All\"}),value:0},{label:Object(n.jsx)(c.a,{id:\"metrics.views\",defaultMessage:\"Views\"}),value:1},{label:Object(n.jsx)(c.a,{id:\"metrics.visitors\",defaultMessage:\"Visitors\"}),value:2},{label:Object(n.jsx)(c.a,{id:\"metrics.events\",defaultMessage:\"Events\"}),value:3}];function m(e){var t=e.view_id,r=e.session_id;return e.event_id?3:t?1:r?2:null}function h(e){return Q[m(e)]}function g(e){var t=e.website_id;return r.find((function(e){return e.website_id===t}))}function x(e){var t,r=e.event_type,a=e.event_value,s=e.view_id,o=e.session_id,u=e.url,d=e.browser,b=e.os,j=e.country,O=e.device,f=e.website_id;if(r)return Object(n.jsxs)(\"div\",{children:[Object(n.jsx)(D.a,{children:r}),\" \",a]});if(s){var v,m=null===(v=g({website_id:f}))||void 0===v?void 0:v.domain;return Object(n.jsx)(\"a\",{className:q.a.link,href:\"//\".concat(m).concat(u),target:\"_blank\",rel:\"noreferrer noopener\",children:u})}return o?Object(n.jsx)(c.a,{id:\"message.log.visitor\",defaultMessage:\"Visitor from {country} using {browser} on {os} {device}\",values:{country:Object(n.jsx)(\"b\",{children:l[j]||i.formatMessage({id:\"label.unknown\",defaultMessage:\"Unknown\"})}),browser:Object(n.jsx)(\"b\",{children:w.a[d]}),os:Object(n.jsx)(\"b\",{children:b}),device:Object(n.jsx)(\"b\",{children:null===(t=i.formatMessage(T.a[O]))||void 0===t?void 0:t.toLowerCase()})}}):void 0}function _(e){var t=e.created_at;return Object(p.a)(new Date(t),\"pp\",o)}function y(e){var t=e.session_id;return Object(G.d)(f[t]||\"\".concat(t).concat(g(e)))}return Object(n.jsxs)(\"div\",{className:q.a.table,children:[Object(n.jsx)(S.a,{buttons:v,selected:d,onClick:b}),Object(n.jsx)(\"div\",{className:q.a.header,children:Object(n.jsx)(c.a,{id:\"label.realtime-logs\",defaultMessage:\"Realtime logs\"})}),Object(n.jsxs)(\"div\",{className:q.a.body,children:[0===(null===j||void 0===j?void 0:j.length)&&Object(n.jsx)(I.a,{}),(null===j||void 0===j?void 0:j.length)>0&&Object(n.jsx)(H.a,{height:400,itemCount:j.length,itemSize:40,children:function(e){var t,a=e.index,i=e.style,c=j[a];return Object(n.jsxs)(\"div\",{className:q.a.row,style:i,children:[Object(n.jsx)(\"div\",{children:Object(n.jsx)(C.a,{color:y(c)})}),Object(n.jsx)(\"div\",{className:q.a.time,children:_(c)}),Object(n.jsxs)(\"div\",{className:q.a.detail,children:[Object(n.jsx)(k.a,{className:q.a.icon,icon:h(c)}),x(c)]}),!s&&r.length>1&&Object(n.jsx)(\"div\",{className:q.a.website,children:null===(t=g(c))||void 0===t?void 0:t.domain})]})}})]})]})}r(\"tfvX\"),r(\"dB/W\");var ee=r(\"NgRG\"),te=r(\"POTn\"),re=r.n(te);function ne(e){var t=e.websites,r=e.data,a=(e.websiteId,e.onSelect,[{label:Object(n.jsx)(c.a,{id:\"label.all-websites\",defaultMessage:\"All websites\"}),value:0}].concat(t.map((function(e,t){return{label:e.name,value:e.website_id,divider:0===t}}))),r.pageviews),s=r.sessions,i=r.events,o=r.countries;return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(\"div\",{className:re.a.metrics,children:[Object(n.jsx)(ee.a,{label:Object(n.jsx)(c.a,{id:\"metrics.views\",defaultMessage:\"Views\"}),value:a.length}),Object(n.jsx)(ee.a,{label:Object(n.jsx)(c.a,{id:\"metrics.visitors\",defaultMessage:\"Visitors\"}),value:s.length}),Object(n.jsx)(ee.a,{label:Object(n.jsx)(c.a,{id:\"metrics.events\",defaultMessage:\"Events\"}),value:i.length}),Object(n.jsx)(ee.a,{label:Object(n.jsx)(c.a,{id:\"metrics.countries\",defaultMessage:\"Countries\"}),value:o.length})]})})}var ae=r(\"sjKz\"),se=r(\"vX6h\"),ie=r(\"GyfN\");function ce(e){var t=e.websiteId,r=e.data,s=e.websites,i=r.pageviews,o=Object(a.useState)(0),l=o[0],u=o[1],d=Object(a.useMemo)((function(){return s.map((function(e){return e.domain}))}),[s]),b=Object(a.useCallback)((function(e){var t,r;return 1===s.length?null===(t=s[0])||void 0===t?void 0:t.domain:null===(r=s.find((function(t){return t.website_id===e})))||void 0===r?void 0:r.domain}),[s]),j=[{label:Object(n.jsx)(c.a,{id:\"metrics.referrers\",defaultMessage:\"Referrers\"}),value:0},{label:Object(n.jsx)(c.a,{id:\"metrics.pages\",defaultMessage:\"Pages\"}),value:1}],f=Object(a.useMemo)((function(){return i?[Object(ie.c)(i.reduce((function(e,t){var r=t.referrer;if(null!==r&&void 0!==r&&r.startsWith(\"http\")){var n=new URL(r).hostname.replace(/^www\\./,\"\");if(n&&!d.includes(n)){var a=e.find((function(e){return e.x===n}));a?a.y+=1:e.push({x:n,y:1})}}return e}),[]).sort(O()(\"y\",-1))),Object(ie.c)(i.reduce((function(e,r){var n,a=r.url,i=r.website_id;if(null!==(n=a)&&void 0!==n&&n.startsWith(\"/\")){!t&&s.length>1&&(a=\"\".concat(b(i)).concat(a));var c=e.find((function(e){return e.x===a}));c?c.y+=1:e.push({x:a,y:1})}return e}),[]).sort(O()(\"y\",-1)))]:[]}),[i]),v=f[0],m=f[1];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(S.a,{buttons:j,selected:l,onClick:u}),0===l&&Object(n.jsx)(se.a,{title:Object(n.jsx)(c.a,{id:\"metrics.referrers\",defaultMessage:\"Referrers\"}),metric:Object(n.jsx)(c.a,{id:\"metrics.views\",defaultMessage:\"Views\"}),data:v,height:400}),1===l&&Object(n.jsx)(se.a,{title:Object(n.jsx)(c.a,{id:\"metrics.pages\",defaultMessage:\"Pages\"}),metric:Object(n.jsx)(c.a,{id:\"metrics.views\",defaultMessage:\"Views\"}),renderLabel:function(e){var r=e.x,a=r.startsWith(\"/\")?b(t):\"\";return Object(n.jsx)(\"a\",{href:\"//\".concat(a).concat(r),target:\"_blank\",rel:\"noreferrer noopener\",children:r})},data:m,height:400})]})}var oe=r(\"0Kmt\"),le=r(\"j6bx\"),ue=r.n(le);function de(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function be(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?de(Object(r),!0).forEach((function(t){Object(i.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):de(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function je(e,t,r){var n=e.map((function(e){return e.__id}));return e.concat(t.filter((function(e){var t=e.__id;return!n.includes(t)}))).filter((function(e){var t=e.created_at;return new Date(t).getTime()>=r}))}function Oe(e,t){return e.filter((function(e){return e.website_id===t}))}function fe(){var e,t=Object(z.a)().locale,r=Object(U.a)(t),s=Object(a.useState)(),o=s[0],l=s[1],u=Object(a.useState)(0),j=u[0],m=u[1],h=Object(oe.a)(\"/api/realtime/init\"),g=h.data,x=h.loading,_=Object(oe.a)(\"/api/realtime/update\",{params:{start_at:null===o||void 0===o?void 0:o.timestamp},disabled:!(null!==g&&void 0!==g&&null!==(e=g.websites)&&void 0!==e&&e.length)||!o,interval:w.m,headers:Object(i.a)({},w.r,null===g||void 0===g?void 0:g.token)}).data,p=Object(a.useCallback)((function(e){var a=e.x;return Object(n.jsx)(\"span\",{className:t,children:r[a]})}),[r]),y=Object(a.useMemo)((function(){if(o){var e=o.pageviews,t=o.sessions,r=o.events;if(j)return{pageviews:Oe(e,j),sessions:Oe(t,j),events:Oe(r,j)}}return o}),[o,j]),M=Object(a.useMemo)((function(){return null!==y&&void 0!==y&&y.sessions?Object(ie.c)(y.sessions.reduce((function(e,t){var r=t.country;if(r){var n=e.find((function(e){return e.x===r}));n?n.y+=1:e.push({x:r,y:1})}return e}),[]).sort(O()(\"y\",-1))):[]}),[null===y||void 0===y?void 0:y.sessions]);if(Object(a.useEffect)((function(){if(g&&!o){var e=g.websites,t=g.data;l(be({websites:e},t))}}),[g]),Object(a.useEffect)((function(){if(_){var e=_.pageviews,t=_.sessions,r=_.events,n=_.timestamp,a=d(Object(b.a)(new Date),w.n).getTime();l((function(s){return be(be({},s),{},{pageviews:je(s.pageviews,e,a),sessions:je(s.sessions,t,a),events:je(s.events,r,a),timestamp:n})}))}}),[_]),!g||!o||x)return null;var N=o.websites;return Object(n.jsxs)(f.a,{children:[Object(n.jsx)(ne,{websites:N,websiteId:j,data:be(be({},y),{},{countries:M}),onSelect:m}),Object(n.jsx)(\"div\",{className:ue.a.chart,children:Object(n.jsx)(P,{websiteId:j,data:y,unit:\"minute\",records:w.n})}),Object(n.jsxs)(v.c,{children:[Object(n.jsxs)(v.b,{children:[Object(n.jsx)(v.a,{xs:12,lg:4,children:Object(n.jsx)(ce,{websiteId:j,data:y,websites:N})}),Object(n.jsx)(v.a,{xs:12,lg:8,children:Object(n.jsx)($,{websiteId:j,data:y,websites:N})})]}),Object(n.jsxs)(v.b,{children:[Object(n.jsx)(v.a,{xs:12,lg:4,children:Object(n.jsx)(se.a,{title:Object(n.jsx)(c.a,{id:\"metrics.countries\",defaultMessage:\"Countries\"}),metric:Object(n.jsx)(c.a,{id:\"metrics.visitors\",defaultMessage:\"Visitors\"}),data:M,renderLabel:p,height:500})}),Object(n.jsx)(v.a,{xs:12,lg:8,children:Object(n.jsx)(ae.a,{data:M})})]})]})]})}var ve=r(\"IA1E\"),me=r(\"vRNQ\"),he=r.n(me);function ge(){return Object(ve.a)().loading?null:Object(n.jsx)(\"div\",{children:Object(n.jsxs)(s.a,{headerType:\"analysis\",children:[Object(n.jsxs)(\"h1\",{className:he.a.title,children:[\"Analysis \",Object(n.jsx)(\"span\",{className:he.a.orange,children:\"Realtime\"})]}),Object(n.jsxs)(\"div\",{className:he.a.flex,children:[Object(n.jsx)(\"a\",{href:\"/\",className:he.a.card,children:Object(n.jsx)(\"h2\",{children:\"\\u2190 Home\"})}),Object(n.jsx)(\"a\",{href:\"/analysis\",className:he.a.card,children:Object(n.jsx)(\"h2\",{children:\"\\u2190 Analysis\"})}),Object(n.jsx)(\"a\",{href:\"/analysis/dashboard\",className:he.a.card,children:Object(n.jsx)(\"h2\",{children:\"Dashboard \\u2192\"})})]}),Object(n.jsx)(fe,{})]})})}},j6IE:function(e,t,r){\"use strict\";r.d(t,\"b\",(function(){return s}));var n=r(\"i7Pf\"),a=Object(n.b)({name:\"user\",initialState:null,reducers:{updateUser:function(e,t){return t.payload}}}),s=a.actions.updateUser;t.a=a.reducer},j6bx:function(e,t,r){e.exports={container:\"RealtimeDashboard_container__1ZLx1\",chart:\"RealtimeDashboard_chart__1LaXv\"}},vRNQ:function(e,t,r){e.exports={orange:\"Home_orange__2Ws-k\",container:\"Home_container__1EcsU\",main:\"Home_main__1x8gC\",footer:\"Home_footer__1WdhD\",title:\"Home_title__3DjR7\",description:\"Home_description__17Z4F\",code:\"Home_code__axx2Y\",grid:\"Home_grid__2Ei2F\",flex:\"Home_flex__-Lep2\",card:\"Home_card__2SdtB\",card45:\"Home_card45__TeeSF\",card25:\"Home_card25__1Uh8X\",card75:\"Home_card75__26Ifx\",logo:\"Home_logo__1YbrH\"}}},[[\"Z2iK\",0,1,7,8,13,2,3,4,5,9,14,16]]]);","map":{"version":3,"sources":["static/chunks/pages/analysis/realtime-48de3bd1f64946a68ec8.js"],"names":["_N_E","window","push","IA1E","module","__webpack_exports__","__webpack_require__","d","useRequireLogin","D_horizon_admin2_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__","D_horizon_admin2_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","n","D_horizon_admin2_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_2__","react_redux__WEBPACK_IMPORTED_MODULE_3__","redux_actions_user__WEBPACK_IMPORTED_MODULE_4__","next_router__WEBPACK_IMPORTED_MODULE_5__","lib_web__WEBPACK_IMPORTED_MODULE_6__","router","Object","dispatch","storeUser","state","user","_useState","loading","setLoading","_useState2","setUser","_loadUser","a","mark","_callee","_yield$get","ok","data","wrap","_context","prev","next","concat","basePath","sent","abrupt","stop","apply","this","arguments","loadUser","POTn","exports","metrics","Z2iK","__NEXT_P","cNLv","table","header","row","body","icon","time","website","detail","link","j4r0","r","RealtimePage","jsx_runtime","react","Layout","defineProperty","message","toInteger","addMinutes","requiredArgs","subMinutes","dirtyDate","dirtyAmount","amount","startOfMinute","thenBy_module","thenBy_module_default","Page","GridLayout","objectWithoutProperties","parseISO","format","isBefore","PageviewsChart","date","constants","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","_objectSpread","target","i","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","mapData","last","arr","reduce","obj","val","created_at","t","getTime","y","RealtimeChart","_ref","unit","props","endDate","Date","startDate","prevEndDate","chartData","pageviews","sessions","animationDuration","current","height","_path","toConsumableArray","useIntl","index_esm","Icon","Tag","Dot","FilterButtons","NoData","messages","useLocale","useCountryNames","_extends","assign","prototype","hasOwnProperty","call","visitor_path","bolt","xmlns","viewBox","visitor_extends","eye_path","visitor","eye_extends","_TYPE_ICONS","eye","lib_format","RealtimeLog_module","RealtimeLog_module_default","TYPE_ICONS","RealtimeLog","websites","websiteId","intl","locale","countryNames","setFilter","logs","events","sort","getType","uuids","_ref2","session_id","session_uuid","buttons","label","id","defaultMessage","value","_ref3","view_id","event_id","getIcon","getWebsite","_ref4","website_id","find","getDetail","_ref5","_intl$formatMessage","event_type","event_value","url","browser","os","country","device","children","_getWebsite","domain","className","href","rel","values","formatMessage","toLowerCase","_ref6","getColor","selected","onClick","itemCount","itemSize","_ref7","_getWebsite2","index","style","color","MetricCard","RealtimeHeader_module","RealtimeHeader_module_default","RealtimeHeader","onSelect","map","name","divider","countries","WorldMap","DataTable","filters","RealtimeViews","domains","getDomain","_websites$","_websites$find","_useMemo","referrer","startsWith","hostname","URL","replace","includes","x","_url","_ref8","referrers","pages","title","metric","renderLabel","useFetch","RealtimeDashboard_module","RealtimeDashboard_module_default","RealtimeDashboard_ownKeys","RealtimeDashboard_objectSpread","mergeData","ids","__id","filterWebsite","RealtimeDashboard","_init$websites","setData","setWebsiteId","_useFetch","init","updates","params","start_at","timestamp","disabled","interval","headers","token","renderCountryName","realtimeData","_websites","_data","chart","records","xs","lg","Home_module","Home_module_default","headerType","orange","flex","card","j6IE","updateUser","_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__","initialState","reducers","action","payload","actions","j6bx","container","vRNQ","main","footer","description","code","grid","card45","card25","card75","logo"],"mappings":"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"},"name":"static/chunks/pages/analysis/realtime-48de3bd1f64946a68ec8.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[29],{\n\n/***/ \"IA1E\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return useRequireLogin; });\n/* harmony import */ var D_horizon_admin2_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"vJKn\");\n/* harmony import */ var D_horizon_admin2_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(D_horizon_admin2_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var D_horizon_admin2_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"rg98\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"q1tI\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_redux__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"/MKj\");\n/* harmony import */ var redux_actions_user__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"j6IE\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"20a2\");\n/* harmony import */ var next_router__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_router__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var lib_web__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(\"jeBt\");\n\n\n\n\n\n\n\nfunction useRequireLogin() {\n  var router = Object(next_router__WEBPACK_IMPORTED_MODULE_5__[\"useRouter\"])();\n  var dispatch = Object(react_redux__WEBPACK_IMPORTED_MODULE_3__[/* useDispatch */ \"b\"])();\n  var storeUser = Object(react_redux__WEBPACK_IMPORTED_MODULE_3__[/* useSelector */ \"c\"])(function (state) {\n    return state.user;\n  });\n\n  var _useState = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(!storeUser),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useState2 = Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useState\"])(storeUser),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  function loadUser() {\n    return _loadUser.apply(this, arguments);\n  }\n\n  function _loadUser() {\n    _loadUser = Object(D_horizon_admin2_node_modules_next_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/D_horizon_admin2_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee() {\n      var _yield$get, ok, data;\n\n      return D_horizon_admin2_node_modules_next_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n              _context.next = 3;\n              return Object(lib_web__WEBPACK_IMPORTED_MODULE_6__[/* get */ \"b\"])(\"\".concat(router.basePath, \"/api/auth/verify\"));\n\n            case 3:\n              _yield$get = _context.sent;\n              ok = _yield$get.ok;\n              data = _yield$get.data;\n\n              if (ok) {\n                _context.next = 8;\n                break;\n              }\n\n              return _context.abrupt(\"return\", router.push('/login'));\n\n            case 8:\n              _context.next = 10;\n              return dispatch(Object(redux_actions_user__WEBPACK_IMPORTED_MODULE_4__[/* updateUser */ \"b\"])(data));\n\n            case 10:\n              setUser(user);\n              setLoading(false);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _loadUser.apply(this, arguments);\n  }\n\n  Object(react__WEBPACK_IMPORTED_MODULE_2__[\"useEffect\"])(function () {\n    if (!loading && user) {\n      return;\n    }\n\n    loadUser();\n  }, []);\n  return {\n    user: user,\n    loading: loading\n  };\n}\n\n/***/ }),\n\n/***/ \"POTn\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\nmodule.exports = {\"metrics\":\"RealtimeHeader_metrics__3UCe2\"};\n\n/***/ }),\n\n/***/ \"Z2iK\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/analysis/realtime\",\n      function () {\n        return __webpack_require__(\"j4r0\");\n      }\n    ]);\n  \n\n/***/ }),\n\n/***/ \"cNLv\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"RealtimeLog_table__2Tl9b\",\"header\":\"RealtimeLog_header__2LeBZ\",\"row\":\"RealtimeLog_row__1a7u4\",\"body\":\"RealtimeLog_body__3dkV9\",\"icon\":\"RealtimeLog_icon__3aQPX\",\"time\":\"RealtimeLog_time__PHd3a\",\"website\":\"RealtimeLog_website__1eqHT\",\"detail\":\"RealtimeLog_detail__2LyTK\",\"link\":\"RealtimeLog_link__2ni65\"};\n\n/***/ }),\n\n/***/ \"j4r0\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"default\", function() { return /* binding */ RealtimePage; });\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(\"nKUr\");\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(\"q1tI\");\n\n// EXTERNAL MODULE: ./components/layout/Layout.js + 15 modules\nvar Layout = __webpack_require__(\"80PL\");\n\n// EXTERNAL MODULE: ./node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty.js\nvar defineProperty = __webpack_require__(\"cpVT\");\n\n// EXTERNAL MODULE: ./node_modules/react-intl/lib/src/components/message.js\nvar message = __webpack_require__(\"kriW\");\n\n// EXTERNAL MODULE: ./node_modules/date-fns/esm/_lib/toInteger/index.js\nvar toInteger = __webpack_require__(\"/h9T\");\n\n// EXTERNAL MODULE: ./node_modules/date-fns/esm/addMinutes/index.js\nvar addMinutes = __webpack_require__(\"IYaI\");\n\n// EXTERNAL MODULE: ./node_modules/date-fns/esm/_lib/requiredArgs/index.js\nvar requiredArgs = __webpack_require__(\"jIYg\");\n\n// CONCATENATED MODULE: ./node_modules/date-fns/esm/subMinutes/index.js\n\n\n\n/**\n * @name subMinutes\n * @category Minute Helpers\n * @summary Subtract the specified number of minutes from the given date.\n *\n * @description\n * Subtract the specified number of minutes from the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of minutes to be subtracted. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the minutes subtracted\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Subtract 30 minutes from 10 July 2014 12:00:00:\n * const result = subMinutes(new Date(2014, 6, 10, 12, 0), 30)\n * //=> Thu Jul 10 2014 11:30:00\n */\n\nfunction subMinutes(dirtyDate, dirtyAmount) {\n  Object(requiredArgs[\"a\" /* default */])(2, arguments);\n  var amount = Object(toInteger[\"a\" /* default */])(dirtyAmount);\n  return Object(addMinutes[\"a\" /* default */])(dirtyDate, -amount);\n}\n// EXTERNAL MODULE: ./node_modules/date-fns/esm/startOfMinute/index.js\nvar startOfMinute = __webpack_require__(\"0LOL\");\n\n// EXTERNAL MODULE: ./node_modules/thenby/thenBy.module.js\nvar thenBy_module = __webpack_require__(\"zsrT\");\nvar thenBy_module_default = /*#__PURE__*/__webpack_require__.n(thenBy_module);\n\n// EXTERNAL MODULE: ./components/layout/Page.js + 2 modules\nvar Page = __webpack_require__(\"CUtM\");\n\n// EXTERNAL MODULE: ./components/layout/GridLayout.js\nvar GridLayout = __webpack_require__(\"FtD2\");\n\n// EXTERNAL MODULE: ./node_modules/next/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js + 1 modules\nvar objectWithoutProperties = __webpack_require__(\"dhJC\");\n\n// EXTERNAL MODULE: ./node_modules/date-fns/esm/parseISO/index.js\nvar parseISO = __webpack_require__(\"4+6U\");\n\n// EXTERNAL MODULE: ./node_modules/date-fns/esm/format/index.js + 16 modules\nvar format = __webpack_require__(\"sWYD\");\n\n// EXTERNAL MODULE: ./node_modules/date-fns/esm/isBefore/index.js\nvar isBefore = __webpack_require__(\"dndX\");\n\n// EXTERNAL MODULE: ./components/metrics/PageviewsChart.js + 1 modules\nvar PageviewsChart = __webpack_require__(\"rqNM\");\n\n// EXTERNAL MODULE: ./lib/date.js + 18 modules\nvar date = __webpack_require__(\"rIuf\");\n\n// EXTERNAL MODULE: ./lib/constants.js\nvar constants = __webpack_require__(\"YSmr\");\n\n// CONCATENATED MODULE: ./components/metrics/RealtimeChart.js\n\n\n\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { Object(defineProperty[\"a\" /* default */])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n\n\n\n\n\n\nfunction mapData(data) {\n  var last = 0;\n  var arr = [];\n  data.reduce(function (obj, val) {\n    var created_at = val.created_at;\n    var t = Object(startOfMinute[\"a\" /* default */])(Object(parseISO[\"a\" /* default */])(created_at));\n\n    if (t.getTime() > last) {\n      obj = {\n        t: Object(format[\"a\" /* default */])(t, 'yyyy-LL-dd HH:mm:00'),\n        y: 1\n      };\n      arr.push(obj);\n      last = t;\n    } else {\n      obj.y += 1;\n    }\n\n    return obj;\n  }, {});\n  return arr;\n}\n\nfunction RealtimeChart(_ref) {\n  var data = _ref.data,\n      unit = _ref.unit,\n      props = Object(objectWithoutProperties[\"a\" /* default */])(_ref, [\"data\", \"unit\"]);\n\n  var endDate = Object(startOfMinute[\"a\" /* default */])(new Date());\n  var startDate = subMinutes(endDate, constants[\"n\" /* REALTIME_RANGE */]);\n  var prevEndDate = Object(react[\"useRef\"])(endDate);\n  var chartData = Object(react[\"useMemo\"])(function () {\n    if (data) {\n      return {\n        pageviews: Object(date[\"b\" /* getDateArray */])(mapData(data.pageviews), startDate, endDate, unit),\n        sessions: Object(date[\"b\" /* getDateArray */])(mapData(data.sessions), startDate, endDate, unit)\n      };\n    }\n\n    return {\n      pageviews: [],\n      sessions: []\n    };\n  }, [data]); // Don't animate the bars shifting over because it looks weird\n\n  var animationDuration = Object(react[\"useMemo\"])(function () {\n    if (Object(isBefore[\"a\" /* default */])(prevEndDate.current, endDate)) {\n      prevEndDate.current = endDate;\n      return 0;\n    }\n\n    return constants[\"c\" /* DEFAULT_ANIMATION_DURATION */];\n  }, [data]);\n  return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(PageviewsChart[\"a\" /* default */], _objectSpread(_objectSpread({}, props), {}, {\n    height: 200,\n    unit: unit,\n    data: chartData,\n    animationDuration: animationDuration\n  }));\n}\n// EXTERNAL MODULE: ./node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js + 3 modules\nvar toConsumableArray = __webpack_require__(\"z7pX\");\n\n// EXTERNAL MODULE: ./node_modules/react-intl/lib/src/components/useIntl.js\nvar useIntl = __webpack_require__(\"dDsW\");\n\n// EXTERNAL MODULE: ./node_modules/react-window/dist/index.esm.js + 4 modules\nvar index_esm = __webpack_require__(\"iR1w\");\n\n// EXTERNAL MODULE: ./components/common/Icon.js\nvar Icon = __webpack_require__(\"atwx\");\n\n// EXTERNAL MODULE: ./components/common/Tag.js\nvar Tag = __webpack_require__(\"fFFQ\");\n\n// EXTERNAL MODULE: ./components/common/Dot.js\nvar Dot = __webpack_require__(\"ty6r\");\n\n// EXTERNAL MODULE: ./components/common/FilterButtons.js\nvar FilterButtons = __webpack_require__(\"2K+N\");\n\n// EXTERNAL MODULE: ./components/common/NoData.js\nvar NoData = __webpack_require__(\"ZzUg\");\n\n// EXTERNAL MODULE: ./components/messages.js\nvar messages = __webpack_require__(\"m/GJ\");\n\n// EXTERNAL MODULE: ./hooks/useLocale.js\nvar useLocale = __webpack_require__(\"nsFc\");\n\n// EXTERNAL MODULE: ./hooks/useCountryNames.js\nvar useCountryNames = __webpack_require__(\"LAde\");\n\n// CONCATENATED MODULE: ./assets/bolt.svg\nvar _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\n\n\nfunction SvgBolt(props) {\n  return /*#__PURE__*/react[\"createElement\"](\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 320 512\"\n  }, props), _path || (_path = /*#__PURE__*/react[\"createElement\"](\"path\", {\n    d: \"M296 160H180.6l42.6-129.8C227.2 15 215.7 0 200 0H56C44 0 33.8 8.9 32.2 20.8l-32 240C-1.7 275.2 9.5 288 24 288h118.7L96.6 482.5c-3.6 15.2 8 29.5 23.3 29.5 8.4 0 16.4-4.4 20.8-12l176-304c9.3-15.9-2.2-36-20.7-36z\"\n  })));\n}\n\n/* harmony default export */ var bolt = (SvgBolt);\n// CONCATENATED MODULE: ./assets/visitor.svg\nvar visitor_path;\n\nfunction visitor_extends() { visitor_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return visitor_extends.apply(this, arguments); }\n\n\n\nfunction SvgVisitor(props) {\n  return /*#__PURE__*/react[\"createElement\"](\"svg\", visitor_extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 448 512\"\n  }, props), visitor_path || (visitor_path = /*#__PURE__*/react[\"createElement\"](\"path\", {\n    d: \"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z\"\n  })));\n}\n\n/* harmony default export */ var visitor = (SvgVisitor);\n// CONCATENATED MODULE: ./assets/eye.svg\nvar eye_path;\n\nfunction eye_extends() { eye_extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return eye_extends.apply(this, arguments); }\n\n\n\nfunction SvgEye(props) {\n  return /*#__PURE__*/react[\"createElement\"](\"svg\", eye_extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 576 512\"\n  }, props), eye_path || (eye_path = /*#__PURE__*/react[\"createElement\"](\"path\", {\n    d: \"M288 144a110.94 110.94 0 00-31.24 5 55.4 55.4 0 017.24 27 56 56 0 01-56 56 55.4 55.4 0 01-27-7.24A111.71 111.71 0 10288 144zm284.52 97.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 000 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 000-29.19zM288 400c-98.65 0-189.09-55-237.93-144C98.91 167 189.34 112 288 112s189.09 55 237.93 144C477.1 345 386.66 400 288 400z\"\n  })));\n}\n\n/* harmony default export */ var eye = (SvgEye);\n// EXTERNAL MODULE: ./lib/format.js\nvar lib_format = __webpack_require__(\"GGPy\");\n\n// EXTERNAL MODULE: ./components/metrics/RealtimeLog.module.css\nvar RealtimeLog_module = __webpack_require__(\"cNLv\");\nvar RealtimeLog_module_default = /*#__PURE__*/__webpack_require__.n(RealtimeLog_module);\n\n// CONCATENATED MODULE: ./components/metrics/RealtimeLog.js\n\n\n\n\n\nvar _TYPE_ICONS;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar TYPE_ALL = 0;\nvar TYPE_PAGEVIEW = 1;\nvar TYPE_SESSION = 2;\nvar TYPE_EVENT = 3;\nvar TYPE_ICONS = (_TYPE_ICONS = {}, Object(defineProperty[\"a\" /* default */])(_TYPE_ICONS, TYPE_PAGEVIEW, /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(eye, {})), Object(defineProperty[\"a\" /* default */])(_TYPE_ICONS, TYPE_SESSION, /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(visitor, {})), Object(defineProperty[\"a\" /* default */])(_TYPE_ICONS, TYPE_EVENT, /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(bolt, {})), _TYPE_ICONS);\nfunction RealtimeLog(_ref) {\n  var data = _ref.data,\n      websites = _ref.websites,\n      websiteId = _ref.websiteId;\n  var intl = Object(useIntl[\"a\" /* default */])();\n\n  var _useLocale = Object(useLocale[\"a\" /* default */])(),\n      locale = _useLocale.locale;\n\n  var countryNames = Object(useCountryNames[\"a\" /* default */])(locale);\n\n  var _useState = Object(react[\"useState\"])(TYPE_ALL),\n      filter = _useState[0],\n      setFilter = _useState[1];\n\n  var logs = Object(react[\"useMemo\"])(function () {\n    var pageviews = data.pageviews,\n        sessions = data.sessions,\n        events = data.events;\n    var logs = [].concat(Object(toConsumableArray[\"a\" /* default */])(pageviews), Object(toConsumableArray[\"a\" /* default */])(sessions), Object(toConsumableArray[\"a\" /* default */])(events)).sort(thenBy_module_default()('created_at', -1));\n\n    if (filter) {\n      return logs.filter(function (row) {\n        return getType(row) === filter;\n      });\n    }\n\n    return logs;\n  }, [data, filter]);\n  var uuids = Object(react[\"useMemo\"])(function () {\n    return data.sessions.reduce(function (obj, _ref2) {\n      var session_id = _ref2.session_id,\n          session_uuid = _ref2.session_uuid;\n      obj[session_id] = session_uuid;\n      return obj;\n    }, {});\n  }, [data]);\n  var buttons = [{\n    label: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(message[\"a\" /* default */], {\n      id: \"label.all\",\n      defaultMessage: \"All\"\n    }),\n    value: TYPE_ALL\n  }, {\n    label: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(message[\"a\" /* default */], {\n      id: \"metrics.views\",\n      defaultMessage: \"Views\"\n    }),\n    value: TYPE_PAGEVIEW\n  }, {\n    label: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(message[\"a\" /* default */], {\n      id: \"metrics.visitors\",\n      defaultMessage: \"Visitors\"\n    }),\n    value: TYPE_SESSION\n  }, {\n    label: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(message[\"a\" /* default */], {\n      id: \"metrics.events\",\n      defaultMessage: \"Events\"\n    }),\n    value: TYPE_EVENT\n  }];\n\n  function getType(_ref3) {\n    var view_id = _ref3.view_id,\n        session_id = _ref3.session_id,\n        event_id = _ref3.event_id;\n\n    if (event_id) {\n      return TYPE_EVENT;\n    }\n\n    if (view_id) {\n      return TYPE_PAGEVIEW;\n    }\n\n    if (session_id) {\n      return TYPE_SESSION;\n    }\n\n    return null;\n  }\n\n  function getIcon(row) {\n    return TYPE_ICONS[getType(row)];\n  }\n\n  function getWebsite(_ref4) {\n    var website_id = _ref4.website_id;\n    return websites.find(function (n) {\n      return n.website_id === website_id;\n    });\n  }\n\n  function getDetail(_ref5) {\n    var event_type = _ref5.event_type,\n        event_value = _ref5.event_value,\n        view_id = _ref5.view_id,\n        session_id = _ref5.session_id,\n        url = _ref5.url,\n        browser = _ref5.browser,\n        os = _ref5.os,\n        country = _ref5.country,\n        device = _ref5.device,\n        website_id = _ref5.website_id;\n\n    if (event_type) {\n      return /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n        children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Tag[\"a\" /* default */], {\n          children: event_type\n        }), \" \", event_value]\n      });\n    }\n\n    if (view_id) {\n      var _getWebsite;\n\n      var domain = (_getWebsite = getWebsite({\n        website_id: website_id\n      })) === null || _getWebsite === void 0 ? void 0 : _getWebsite.domain;\n      return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\", {\n        className: RealtimeLog_module_default.a.link,\n        href: \"//\".concat(domain).concat(url),\n        target: \"_blank\",\n        rel: \"noreferrer noopener\",\n        children: url\n      });\n    }\n\n    if (session_id) {\n      var _intl$formatMessage;\n\n      return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(message[\"a\" /* default */], {\n        id: \"message.log.visitor\",\n        defaultMessage: \"Visitor from {country} using {browser} on {os} {device}\",\n        values: {\n          country: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\", {\n            children: countryNames[country] || intl.formatMessage({\n              id: 'label.unknown',\n              defaultMessage: 'Unknown'\n            })\n          }),\n          browser: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\", {\n            children: constants[\"a\" /* BROWSERS */][browser]\n          }),\n          os: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\", {\n            children: os\n          }),\n          device: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"b\", {\n            children: (_intl$formatMessage = intl.formatMessage(messages[\"a\" /* devices */][device])) === null || _intl$formatMessage === void 0 ? void 0 : _intl$formatMessage.toLowerCase()\n          })\n        }\n      });\n    }\n  }\n\n  function getTime(_ref6) {\n    var created_at = _ref6.created_at;\n    return Object(date[\"a\" /* dateFormat */])(new Date(created_at), 'pp', locale);\n  }\n\n  function getColor(row) {\n    var session_id = row.session_id;\n    return Object(lib_format[\"d\" /* stringToColor */])(uuids[session_id] || \"\".concat(session_id).concat(getWebsite(row)));\n  }\n\n  var Row = function Row(_ref7) {\n    var _getWebsite2;\n\n    var index = _ref7.index,\n        style = _ref7.style;\n    var row = logs[index];\n    return /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n      className: RealtimeLog_module_default.a.row,\n      style: style,\n      children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n        children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Dot[\"a\" /* default */], {\n          color: getColor(row)\n        })\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n        className: RealtimeLog_module_default.a.time,\n        children: getTime(row)\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n        className: RealtimeLog_module_default.a.detail,\n        children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Icon[\"a\" /* default */], {\n          className: RealtimeLog_module_default.a.icon,\n          icon: getIcon(row)\n        }), getDetail(row)]\n      }), !websiteId && websites.length > 1 && /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n        className: RealtimeLog_module_default.a.website,\n        children: (_getWebsite2 = getWebsite(row)) === null || _getWebsite2 === void 0 ? void 0 : _getWebsite2.domain\n      })]\n    });\n  };\n\n  return /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n    className: RealtimeLog_module_default.a.table,\n    children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FilterButtons[\"a\" /* default */], {\n      buttons: buttons,\n      selected: filter,\n      onClick: setFilter\n    }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n      className: RealtimeLog_module_default.a.header,\n      children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(message[\"a\" /* default */], {\n        id: \"label.realtime-logs\",\n        defaultMessage: \"Realtime logs\"\n      })\n    }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n      className: RealtimeLog_module_default.a.body,\n      children: [(logs === null || logs === void 0 ? void 0 : logs.length) === 0 && /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(NoData[\"a\" /* default */], {}), (logs === null || logs === void 0 ? void 0 : logs.length) > 0 && /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(index_esm[\"a\" /* FixedSizeList */], {\n        height: 400,\n        itemCount: logs.length,\n        itemSize: 40,\n        children: Row\n      })]\n    })]\n  });\n}\n// EXTERNAL MODULE: ./components/layout/PageHeader.js\nvar PageHeader = __webpack_require__(\"tfvX\");\n\n// EXTERNAL MODULE: ./components/common/DropDown.js\nvar DropDown = __webpack_require__(\"dB/W\");\n\n// EXTERNAL MODULE: ./components/metrics/MetricCard.js\nvar MetricCard = __webpack_require__(\"NgRG\");\n\n// EXTERNAL MODULE: ./components/metrics/RealtimeHeader.module.css\nvar RealtimeHeader_module = __webpack_require__(\"POTn\");\nvar RealtimeHeader_module_default = /*#__PURE__*/__webpack_require__.n(RealtimeHeader_module);\n\n// CONCATENATED MODULE: ./components/metrics/RealtimeHeader.js\n\n\n\n\n\n\n\n\n\nfunction RealtimeHeader(_ref) {\n  var websites = _ref.websites,\n      data = _ref.data,\n      websiteId = _ref.websiteId,\n      onSelect = _ref.onSelect;\n  var options = [{\n    label: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(message[\"a\" /* default */], {\n      id: \"label.all-websites\",\n      defaultMessage: \"All websites\"\n    }),\n    value: 0\n  }].concat(websites.map(function (_ref2, index) {\n    var name = _ref2.name,\n        website_id = _ref2.website_id;\n    return {\n      label: name,\n      value: website_id,\n      divider: index === 0\n    };\n  }));\n  var pageviews = data.pageviews,\n      sessions = data.sessions,\n      events = data.events,\n      countries = data.countries;\n  return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"], {\n    children: /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n      className: RealtimeHeader_module_default.a.metrics,\n      children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MetricCard[\"a\" /* default */], {\n        label: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(message[\"a\" /* default */], {\n          id: \"metrics.views\",\n          defaultMessage: \"Views\"\n        }),\n        value: pageviews.length\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MetricCard[\"a\" /* default */], {\n        label: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(message[\"a\" /* default */], {\n          id: \"metrics.visitors\",\n          defaultMessage: \"Visitors\"\n        }),\n        value: sessions.length\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MetricCard[\"a\" /* default */], {\n        label: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(message[\"a\" /* default */], {\n          id: \"metrics.events\",\n          defaultMessage: \"Events\"\n        }),\n        value: events.length\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(MetricCard[\"a\" /* default */], {\n        label: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(message[\"a\" /* default */], {\n          id: \"metrics.countries\",\n          defaultMessage: \"Countries\"\n        }),\n        value: countries.length\n      })]\n    })\n  });\n}\n// EXTERNAL MODULE: ./components/common/WorldMap.js\nvar WorldMap = __webpack_require__(\"sjKz\");\n\n// EXTERNAL MODULE: ./components/metrics/DataTable.js\nvar DataTable = __webpack_require__(\"vX6h\");\n\n// EXTERNAL MODULE: ./lib/filters.js\nvar filters = __webpack_require__(\"GyfN\");\n\n// CONCATENATED MODULE: ./components/metrics/RealtimeViews.js\n\n\n\n\n\n\n\n\n\nvar FILTER_REFERRERS = 0;\nvar FILTER_PAGES = 1;\nfunction RealtimeViews(_ref) {\n  var websiteId = _ref.websiteId,\n      data = _ref.data,\n      websites = _ref.websites;\n  var pageviews = data.pageviews;\n\n  var _useState = Object(react[\"useState\"])(FILTER_REFERRERS),\n      filter = _useState[0],\n      setFilter = _useState[1];\n\n  var domains = Object(react[\"useMemo\"])(function () {\n    return websites.map(function (_ref2) {\n      var domain = _ref2.domain;\n      return domain;\n    });\n  }, [websites]);\n  var getDomain = Object(react[\"useCallback\"])(function (id) {\n    var _websites$, _websites$find;\n\n    return websites.length === 1 ? (_websites$ = websites[0]) === null || _websites$ === void 0 ? void 0 : _websites$.domain : (_websites$find = websites.find(function (_ref3) {\n      var website_id = _ref3.website_id;\n      return website_id === id;\n    })) === null || _websites$find === void 0 ? void 0 : _websites$find.domain;\n  }, [websites]);\n  var buttons = [{\n    label: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(message[\"a\" /* default */], {\n      id: \"metrics.referrers\",\n      defaultMessage: \"Referrers\"\n    }),\n    value: FILTER_REFERRERS\n  }, {\n    label: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(message[\"a\" /* default */], {\n      id: \"metrics.pages\",\n      defaultMessage: \"Pages\"\n    }),\n    value: FILTER_PAGES\n  }];\n\n  var renderLink = function renderLink(_ref4) {\n    var x = _ref4.x;\n    var domain = x.startsWith('/') ? getDomain(websiteId) : '';\n    return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\", {\n      href: \"//\".concat(domain).concat(x),\n      target: \"_blank\",\n      rel: \"noreferrer noopener\",\n      children: x\n    });\n  };\n\n  var _useMemo = Object(react[\"useMemo\"])(function () {\n    if (pageviews) {\n      var _referrers = Object(filters[\"c\" /* percentFilter */])(pageviews.reduce(function (arr, _ref5) {\n        var referrer = _ref5.referrer;\n\n        if (referrer !== null && referrer !== void 0 && referrer.startsWith('http')) {\n          var hostname = new URL(referrer).hostname.replace(/^www\\./, '');\n\n          if (hostname && !domains.includes(hostname)) {\n            var row = arr.find(function (_ref6) {\n              var x = _ref6.x;\n              return x === hostname;\n            });\n\n            if (!row) {\n              arr.push({\n                x: hostname,\n                y: 1\n              });\n            } else {\n              row.y += 1;\n            }\n          }\n        }\n\n        return arr;\n      }, []).sort(thenBy_module_default()('y', -1)));\n\n      var _pages = Object(filters[\"c\" /* percentFilter */])(pageviews.reduce(function (arr, _ref7) {\n        var _url;\n\n        var url = _ref7.url,\n            website_id = _ref7.website_id;\n\n        if ((_url = url) !== null && _url !== void 0 && _url.startsWith('/')) {\n          if (!websiteId && websites.length > 1) {\n            url = \"\".concat(getDomain(website_id)).concat(url);\n          }\n\n          var row = arr.find(function (_ref8) {\n            var x = _ref8.x;\n            return x === url;\n          });\n\n          if (!row) {\n            arr.push({\n              x: url,\n              y: 1\n            });\n          } else {\n            row.y += 1;\n          }\n        }\n\n        return arr;\n      }, []).sort(thenBy_module_default()('y', -1)));\n\n      return [_referrers, _pages];\n    }\n\n    return [];\n  }, [pageviews]),\n      referrers = _useMemo[0],\n      pages = _useMemo[1];\n\n  return /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(jsx_runtime[\"Fragment\"], {\n    children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(FilterButtons[\"a\" /* default */], {\n      buttons: buttons,\n      selected: filter,\n      onClick: setFilter\n    }), filter === FILTER_REFERRERS && /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(DataTable[\"a\" /* default */], {\n      title: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(message[\"a\" /* default */], {\n        id: \"metrics.referrers\",\n        defaultMessage: \"Referrers\"\n      }),\n      metric: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(message[\"a\" /* default */], {\n        id: \"metrics.views\",\n        defaultMessage: \"Views\"\n      }),\n      data: referrers,\n      height: 400\n    }), filter === FILTER_PAGES && /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(DataTable[\"a\" /* default */], {\n      title: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(message[\"a\" /* default */], {\n        id: \"metrics.pages\",\n        defaultMessage: \"Pages\"\n      }),\n      metric: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(message[\"a\" /* default */], {\n        id: \"metrics.views\",\n        defaultMessage: \"Views\"\n      }),\n      renderLabel: renderLink,\n      data: pages,\n      height: 400\n    })]\n  });\n}\n// EXTERNAL MODULE: ./hooks/useFetch.js\nvar useFetch = __webpack_require__(\"0Kmt\");\n\n// EXTERNAL MODULE: ./components/pages/RealtimeDashboard.module.css\nvar RealtimeDashboard_module = __webpack_require__(\"j6bx\");\nvar RealtimeDashboard_module_default = /*#__PURE__*/__webpack_require__.n(RealtimeDashboard_module);\n\n// CONCATENATED MODULE: ./components/pages/RealtimeDashboard.js\n\n\n\n\nfunction RealtimeDashboard_ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction RealtimeDashboard_objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { RealtimeDashboard_ownKeys(Object(source), true).forEach(function (key) { Object(defineProperty[\"a\" /* default */])(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { RealtimeDashboard_ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction mergeData(state, data, time) {\n  var ids = state.map(function (_ref) {\n    var __id = _ref.__id;\n    return __id;\n  });\n  return state.concat(data.filter(function (_ref2) {\n    var __id = _ref2.__id;\n    return !ids.includes(__id);\n  })).filter(function (_ref3) {\n    var created_at = _ref3.created_at;\n    return new Date(created_at).getTime() >= time;\n  });\n}\n\nfunction filterWebsite(data, id) {\n  return data.filter(function (_ref4) {\n    var website_id = _ref4.website_id;\n    return website_id === id;\n  });\n}\n\nfunction RealtimeDashboard() {\n  var _init$websites;\n\n  var _useLocale = Object(useLocale[\"a\" /* default */])(),\n      locale = _useLocale.locale;\n\n  var countryNames = Object(useCountryNames[\"a\" /* default */])(locale);\n\n  var _useState = Object(react[\"useState\"])(),\n      data = _useState[0],\n      setData = _useState[1];\n\n  var _useState2 = Object(react[\"useState\"])(0),\n      websiteId = _useState2[0],\n      setWebsiteId = _useState2[1];\n\n  var _useFetch = Object(useFetch[\"a\" /* default */])('/api/realtime/init'),\n      init = _useFetch.data,\n      loading = _useFetch.loading;\n\n  var _useFetch2 = Object(useFetch[\"a\" /* default */])('/api/realtime/update', {\n    params: {\n      start_at: data === null || data === void 0 ? void 0 : data.timestamp\n    },\n    disabled: !(init !== null && init !== void 0 && (_init$websites = init.websites) !== null && _init$websites !== void 0 && _init$websites.length) || !data,\n    interval: constants[\"m\" /* REALTIME_INTERVAL */],\n    headers: Object(defineProperty[\"a\" /* default */])({}, constants[\"r\" /* TOKEN_HEADER */], init === null || init === void 0 ? void 0 : init.token)\n  }),\n      updates = _useFetch2.data;\n\n  var renderCountryName = Object(react[\"useCallback\"])(function (_ref5) {\n    var x = _ref5.x;\n    return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\", {\n      className: locale,\n      children: countryNames[x]\n    });\n  }, [countryNames]);\n  var realtimeData = Object(react[\"useMemo\"])(function () {\n    if (data) {\n      var pageviews = data.pageviews,\n          sessions = data.sessions,\n          events = data.events;\n\n      if (websiteId) {\n        return {\n          pageviews: filterWebsite(pageviews, websiteId),\n          sessions: filterWebsite(sessions, websiteId),\n          events: filterWebsite(events, websiteId)\n        };\n      }\n    }\n\n    return data;\n  }, [data, websiteId]);\n  var countries = Object(react[\"useMemo\"])(function () {\n    if (realtimeData !== null && realtimeData !== void 0 && realtimeData.sessions) {\n      return Object(filters[\"c\" /* percentFilter */])(realtimeData.sessions.reduce(function (arr, _ref6) {\n        var country = _ref6.country;\n\n        if (country) {\n          var row = arr.find(function (_ref7) {\n            var x = _ref7.x;\n            return x === country;\n          });\n\n          if (!row) {\n            arr.push({\n              x: country,\n              y: 1\n            });\n          } else {\n            row.y += 1;\n          }\n        }\n\n        return arr;\n      }, []).sort(thenBy_module_default()('y', -1)));\n    }\n\n    return [];\n  }, [realtimeData === null || realtimeData === void 0 ? void 0 : realtimeData.sessions]);\n  Object(react[\"useEffect\"])(function () {\n    if (init && !data) {\n      var _websites = init.websites,\n          _data = init.data;\n      setData(RealtimeDashboard_objectSpread({\n        websites: _websites\n      }, _data));\n    }\n  }, [init]);\n  Object(react[\"useEffect\"])(function () {\n    if (updates) {\n      var pageviews = updates.pageviews,\n          sessions = updates.sessions,\n          events = updates.events,\n          timestamp = updates.timestamp;\n      var time = subMinutes(Object(startOfMinute[\"a\" /* default */])(new Date()), constants[\"n\" /* REALTIME_RANGE */]).getTime();\n      setData(function (state) {\n        return RealtimeDashboard_objectSpread(RealtimeDashboard_objectSpread({}, state), {}, {\n          pageviews: mergeData(state.pageviews, pageviews, time),\n          sessions: mergeData(state.sessions, sessions, time),\n          events: mergeData(state.events, events, time),\n          timestamp: timestamp\n        });\n      });\n    }\n  }, [updates]);\n\n  if (!init || !data || loading) {\n    return null;\n  }\n\n  var websites = data.websites;\n  return /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Page[\"a\" /* default */], {\n    children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RealtimeHeader, {\n      websites: websites,\n      websiteId: websiteId,\n      data: RealtimeDashboard_objectSpread(RealtimeDashboard_objectSpread({}, realtimeData), {}, {\n        countries: countries\n      }),\n      onSelect: setWebsiteId\n    }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n      className: RealtimeDashboard_module_default.a.chart,\n      children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RealtimeChart, {\n        websiteId: websiteId,\n        data: realtimeData,\n        unit: \"minute\",\n        records: constants[\"n\" /* REALTIME_RANGE */]\n      })\n    }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(GridLayout[\"c\" /* default */], {\n      children: [/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(GridLayout[\"b\" /* GridRow */], {\n        children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GridLayout[\"a\" /* GridColumn */], {\n          xs: 12,\n          lg: 4,\n          children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RealtimeViews, {\n            websiteId: websiteId,\n            data: realtimeData,\n            websites: websites\n          })\n        }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GridLayout[\"a\" /* GridColumn */], {\n          xs: 12,\n          lg: 8,\n          children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RealtimeLog, {\n            websiteId: websiteId,\n            data: realtimeData,\n            websites: websites\n          })\n        })]\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(GridLayout[\"b\" /* GridRow */], {\n        children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GridLayout[\"a\" /* GridColumn */], {\n          xs: 12,\n          lg: 4,\n          children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(DataTable[\"a\" /* default */], {\n            title: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(message[\"a\" /* default */], {\n              id: \"metrics.countries\",\n              defaultMessage: \"Countries\"\n            }),\n            metric: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(message[\"a\" /* default */], {\n              id: \"metrics.visitors\",\n              defaultMessage: \"Visitors\"\n            }),\n            data: countries,\n            renderLabel: renderCountryName,\n            height: 500\n          })\n        }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(GridLayout[\"a\" /* GridColumn */], {\n          xs: 12,\n          lg: 8,\n          children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(WorldMap[\"a\" /* default */], {\n            data: countries\n          })\n        })]\n      })]\n    })]\n  });\n}\n// EXTERNAL MODULE: ./hooks/useRequireLogin.js\nvar useRequireLogin = __webpack_require__(\"IA1E\");\n\n// EXTERNAL MODULE: ./styles/Home.module.css\nvar Home_module = __webpack_require__(\"vRNQ\");\nvar Home_module_default = /*#__PURE__*/__webpack_require__.n(Home_module);\n\n// CONCATENATED MODULE: ./pages/analysis/realtime.js\n\n\n\n\n\n\n\nfunction RealtimePage() {\n  var _useRequireLogin = Object(useRequireLogin[\"a\" /* default */])(),\n      loading = _useRequireLogin.loading;\n\n  if (loading) {\n    return null;\n  }\n\n  return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n    children: /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(Layout[\"a\" /* default */], {\n      headerType: \"analysis\",\n      children: [/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"h1\", {\n        className: Home_module_default.a.title,\n        children: [\"Analysis \", /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"span\", {\n          className: Home_module_default.a.orange,\n          children: \"Realtime\"\n        })]\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\", {\n        className: Home_module_default.a.flex,\n        children: [/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\", {\n          href: \"/\",\n          className: Home_module_default.a.card,\n          children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\", {\n            children: \"\\u2190 Home\"\n          })\n        }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\", {\n          href: \"/analysis\",\n          className: Home_module_default.a.card,\n          children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\", {\n            children: \"\\u2190 Analysis\"\n          })\n        }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"a\", {\n          href: \"/analysis/dashboard\",\n          className: Home_module_default.a.card,\n          children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\", {\n            children: \"Dashboard \\u2192\"\n          })\n        })]\n      }), /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(RealtimeDashboard, {})]\n    })\n  });\n}\n\n/***/ }),\n\n/***/ \"j6IE\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return updateUser; });\n/* harmony import */ var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"i7Pf\");\n\nvar user = Object(_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_0__[/* createSlice */ \"b\"])({\n  name: 'user',\n  initialState: null,\n  reducers: {\n    updateUser: function updateUser(state, action) {\n      state = action.payload;\n      return state;\n    }\n  }\n});\nvar updateUser = user.actions.updateUser;\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (user.reducer);\n\n/***/ }),\n\n/***/ \"j6bx\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"RealtimeDashboard_container__1ZLx1\",\"chart\":\"RealtimeDashboard_chart__1LaXv\"};\n\n/***/ }),\n\n/***/ \"vRNQ\":\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\nmodule.exports = {\"orange\":\"Home_orange__2Ws-k\",\"container\":\"Home_container__1EcsU\",\"main\":\"Home_main__1x8gC\",\"footer\":\"Home_footer__1WdhD\",\"title\":\"Home_title__3DjR7\",\"description\":\"Home_description__17Z4F\",\"code\":\"Home_code__axx2Y\",\"grid\":\"Home_grid__2Ei2F\",\"flex\":\"Home_flex__-Lep2\",\"card\":\"Home_card__2SdtB\",\"card45\":\"Home_card45__TeeSF\",\"card25\":\"Home_card25__1Uh8X\",\"card75\":\"Home_card75__26Ifx\",\"logo\":\"Home_logo__1YbrH\"};\n\n/***/ })\n\n},[[\"Z2iK\",0,1,7,8,13,2,3,4,5,9,14,16]]]);","inputSourceMap":{"version":3,"sources":["D:\\horizon\\admin2\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!D:\\horizon\\admin2\\hooks\\useRequireLogin.js","D:\\horizon\\admin2\\node_modules\\next\\dist\\compiled\\mini-css-extract-plugin\\loader.js??ref--5-oneOf-2-0!D:\\horizon\\admin2\\node_modules\\next\\dist\\compiled\\css-loader\\cjs.js??ref--5-oneOf-2-1!D:\\horizon\\admin2\\node_modules\\next\\dist\\compiled\\postcss-loader\\cjs.js??ref--5-oneOf-2-2!D:\\horizon\\admin2\\components\\metrics\\RealtimeHeader.module.css","D:\\horizon\\admin2\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-client-pages-loader.js?page=%2Fanalysis%2Frealtime&absolutePagePath=private-next-pages%2Fanalysis%2Frealtime.js!","D:\\horizon\\admin2\\node_modules\\next\\dist\\compiled\\mini-css-extract-plugin\\loader.js??ref--5-oneOf-2-0!D:\\horizon\\admin2\\node_modules\\next\\dist\\compiled\\css-loader\\cjs.js??ref--5-oneOf-2-1!D:\\horizon\\admin2\\node_modules\\next\\dist\\compiled\\postcss-loader\\cjs.js??ref--5-oneOf-2-2!D:\\horizon\\admin2\\components\\metrics\\RealtimeLog.module.css","D:\\horizon\\admin2\\node_modules\\date-fns\\esm\\subMinutes\\index.js","D:\\horizon\\admin2\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!D:\\horizon\\admin2\\components\\metrics\\RealtimeChart.js","D:\\horizon\\admin2\\node_modules\\@svgr\\webpack\\lib\\index.js!D:\\horizon\\admin2\\assets\\bolt.svg","D:\\horizon\\admin2\\node_modules\\@svgr\\webpack\\lib\\index.js!D:\\horizon\\admin2\\assets\\visitor.svg","D:\\horizon\\admin2\\node_modules\\@svgr\\webpack\\lib\\index.js!D:\\horizon\\admin2\\assets\\eye.svg","D:\\horizon\\admin2\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!D:\\horizon\\admin2\\components\\metrics\\RealtimeLog.js","D:\\horizon\\admin2\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!D:\\horizon\\admin2\\components\\metrics\\RealtimeHeader.js","D:\\horizon\\admin2\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!D:\\horizon\\admin2\\components\\metrics\\RealtimeViews.js","D:\\horizon\\admin2\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!D:\\horizon\\admin2\\components\\pages\\RealtimeDashboard.js","D:\\horizon\\admin2\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!D:\\horizon\\admin2\\pages\\analysis\\realtime.js","D:\\horizon\\admin2\\node_modules\\next\\dist\\build\\webpack\\loaders\\next-babel-loader.js??ref--4!D:\\horizon\\admin2\\redux\\actions\\user.js","D:\\horizon\\admin2\\node_modules\\next\\dist\\compiled\\mini-css-extract-plugin\\loader.js??ref--5-oneOf-2-0!D:\\horizon\\admin2\\node_modules\\next\\dist\\compiled\\css-loader\\cjs.js??ref--5-oneOf-2-1!D:\\horizon\\admin2\\node_modules\\next\\dist\\compiled\\postcss-loader\\cjs.js??ref--5-oneOf-2-2!D:\\horizon\\admin2\\components\\pages\\RealtimeDashboard.module.css","D:\\horizon\\admin2\\node_modules\\next\\dist\\compiled\\mini-css-extract-plugin\\loader.js??ref--5-oneOf-2-0!D:\\horizon\\admin2\\node_modules\\next\\dist\\compiled\\css-loader\\cjs.js??ref--5-oneOf-2-1!D:\\horizon\\admin2\\node_modules\\next\\dist\\compiled\\postcss-loader\\cjs.js??ref--5-oneOf-2-2!D:\\horizon\\admin2\\styles\\Home.module.css"],"names":[],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8G;AACe;AACjF;AACW;AACP;AACR;AACV;AACf;AACf,eAAe,6DAAS;AACxB,iBAAiB,uEAAW;AAC5B,kBAAkB,uEAAW;AAC7B;AACA,GAAG;;AAEH,kBAAkB,sDAAQ;AAC1B;AACA;;AAEA,mBAAmB,sDAAQ;AAC3B;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gBAAgB,kJAAiB,eAAe,gHAAmB;AACnE;;AAEA,aAAa,gHAAmB;AAChC;AACA;AACA;AACA;AACA;AACA,qBAAqB,2DAAG;;AAExB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,8BAA8B,6EAAU;;AAExC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;;AAEA,EAAE,uDAAS;AACX;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,C;;;;;;;AC/EA;AACA,kBAAkB,2C;;;;;;;;ACAlB;AACA;AACA;AACA,eAAe,mBAAO,CAAC,MAAyC;AAChE;AACA;;;;;;;;ACNA;AACA,kBAAkB,wT;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACDiC;AACH;AACS;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,YAAY;AACvB,WAAW,OAAO;AAClB,aAAa,KAAK;AAClB,YAAY,UAAU;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEe;AACf,EAAE,uCAAY;AACd,eAAe,oCAAS;AACxB,SAAS,qCAAU;AACnB,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9ByH;AACzE;AAC2F;;AAE3I,0CAA0C,gCAAgC,oCAAoC,oDAAoD,8DAA8D,gEAAgE,EAAE,EAAE,gCAAgC,EAAE,aAAa;;AAEnV,gCAAgC,gBAAgB,sBAAsB,OAAO,uDAAuD,aAAa,uDAAuD,CAAC,yCAAe,2BAA2B,EAAE,EAAE,EAAE,6CAA6C,2EAA2E,EAAE,OAAO,iDAAiD,kFAAkF,EAAE,EAAE,EAAE,EAAE,eAAe;;AAEre;AACkC;AACnC;AACN;AACmC;;AAE3E;AACA;AACA;AACA;AACA;AACA,YAAY,wCAAa,CAAC,mCAAQ;;AAElC;AACA;AACA,WAAW,iCAAM;AACjB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA,GAAG,IAAI;AACP;AACA;;AAEe;AACf;AACA;AACA,cAAc,kDAAwB;;AAEtC,gBAAgB,wCAAa;AAC7B,kBAAkB,UAAU,UAAU,mCAAc;AACpD,oBAAoB,uBAAM;AAC1B,kBAAkB,wBAAO;AACzB;AACA;AACA,mBAAmB,oCAAY;AAC/B,kBAAkB,oCAAY;AAC9B;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG,UAAU;;AAEb,0BAA0B,wBAAO;AACjC,QAAQ,mCAAQ;AAChB;AACA;AACA;;AAEA,WAAW,+CAA0B;AACrC,GAAG;AACH,sBAAsB,0BAAI,CAAC,iCAAc,gCAAgC,YAAY;AACrF;AACA;AACA;AACA;AACA,GAAG;AACH,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzEA;;AAEA,qBAAqB,gDAAgD,gBAAgB,sBAAsB,OAAO,2BAA2B,0BAA0B,yDAAyD,2BAA2B,EAAE,EAAE,EAAE,eAAe,GAAG,wCAAwC;;AAE5R;;AAE/B;AACA,sBAAsB,sBAAmB;AACzC;AACA;AACA,GAAG,yCAAyC,sBAAmB;AAC/D;AACA,GAAG;AACH;;AAEe,gDAAO,E;;ACftB,IAAI,YAAK;;AAET,SAAS,eAAQ,IAAI,CAAC,eAAQ,uCAAuC,gBAAgB,sBAAsB,OAAO,2BAA2B,0BAA0B,yDAAyD,2BAA2B,EAAE,EAAE,EAAE,eAAe,GAAG,QAAQ,eAAQ,wBAAwB;;AAE5R;;AAE/B;AACA,sBAAsB,sBAAmB,QAAQ,eAAQ;AACzD;AACA;AACA,GAAG,UAAU,YAAK,KAAK,YAAK,gBAAgB,sBAAmB;AAC/D;AACA,GAAG;AACH;;AAEe,sDAAU,E;;ACfzB,IAAI,QAAK;;AAET,SAAS,WAAQ,IAAI,CAAC,WAAQ,uCAAuC,gBAAgB,sBAAsB,OAAO,2BAA2B,0BAA0B,yDAAyD,2BAA2B,EAAE,EAAE,EAAE,eAAe,GAAG,QAAQ,WAAQ,wBAAwB;;AAE5R;;AAE/B;AACA,sBAAsB,sBAAmB,QAAQ,WAAQ;AACzD;AACA;AACA,GAAG,UAAU,QAAK,KAAK,QAAK,gBAAgB,sBAAmB;AAC/D;AACA,GAAG;AACH;;AAEe,8CAAM,E;;;;;;;;;ACf6B;AAC6E;AACN;AACzE;;AAEhD;;AAEiD;AACM;AACV;AAChB;AACa;AACF;AACA;AACoB;AACd;AACA;AACN;AACY;AACX;AACN;AACM;AACR;AACU;AACL;AACQ;AAC9C;AACA;AACA;AACA;AACA,kCAAkC,EAAE,yCAAe,0CAA0C,0BAAI,CAAC,GAAG,IAAI,IAAI,yCAAe,yCAAyC,0BAAI,CAAC,OAAO,IAAI,IAAI,yCAAe,uCAAuC,0BAAI,CAAC,IAAI,IAAI;AAC7O;AACf;AACA;AACA;AACA,aAAa,kCAAO;;AAEpB,mBAAmB,oCAAS;AAC5B;;AAEA,qBAAqB,0CAAe;;AAEpC,kBAAkB,yBAAQ;AAC1B;AACA;;AAEA,aAAa,wBAAO;AACpB;AACA;AACA;AACA,yBAAyB,4CAAkB,aAAa,4CAAkB,YAAY,4CAAkB,eAAe,uBAAO;;AAE9H;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA,GAAG;AACH,cAAc,wBAAO;AACrB;AACA;AACA;AACA;AACA;AACA,KAAK,IAAI;AACT,GAAG;AACH;AACA,wBAAwB,0BAAI,CAAC,0BAAgB;AAC7C;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH,wBAAwB,0BAAI,CAAC,0BAAgB;AAC7C;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH,wBAAwB,0BAAI,CAAC,0BAAgB;AAC7C;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH,wBAAwB,0BAAI,CAAC,0BAAgB;AAC7C;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B,2BAAK;AAC/B,gCAAgC,0BAAI,CAAC,sBAAG;AACxC;AACA,SAAS;AACT,OAAO;AACP;;AAEA;AACA;;AAEA;AACA;AACA,OAAO;AACP,0BAA0B,0BAAI;AAC9B,mBAAmB,4BAAM;AACzB;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;;AAEA,0BAA0B,0BAAI,CAAC,0BAAgB;AAC/C;AACA,uCAAuC,QAAQ,QAAQ,QAAQ,KAAK,GAAG,EAAE,OAAO;AAChF;AACA,gCAAgC,0BAAI;AACpC;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX,gCAAgC,0BAAI;AACpC,sBAAsB,6BAAQ;AAC9B,WAAW;AACX,2BAA2B,0BAAI;AAC/B;AACA,WAAW;AACX,+BAA+B,0BAAI;AACnC,gEAAgE,2BAAO;AACvE,WAAW;AACX;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA,WAAW,kCAAU;AACrB;;AAEA;AACA;AACA,WAAW,2CAAa;AACxB;;AAEA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB,2BAAK;AAC7B,iBAAiB,4BAAM;AACvB;AACA,8BAA8B,0BAAI;AAClC,+BAA+B,0BAAI,CAAC,sBAAG;AACvC;AACA,SAAS;AACT,OAAO,gBAAgB,0BAAI;AAC3B,mBAAmB,4BAAM;AACzB;AACA,OAAO,gBAAgB,2BAAK;AAC5B,mBAAmB,4BAAM;AACzB,gCAAgC,0BAAI,CAAC,uBAAI;AACzC,qBAAqB,4BAAM;AAC3B;AACA,SAAS;AACT,OAAO,qDAAqD,0BAAI;AAChE,mBAAmB,4BAAM;AACzB;AACA,OAAO;AACP,KAAK;AACL;;AAEA,sBAAsB,2BAAK;AAC3B,eAAe,4BAAM;AACrB,4BAA4B,0BAAI,CAAC,gCAAa;AAC9C;AACA;AACA;AACA,KAAK,gBAAgB,0BAAI;AACzB,iBAAiB,4BAAM;AACvB,6BAA6B,0BAAI,CAAC,0BAAgB;AAClD;AACA;AACA,OAAO;AACP,KAAK,gBAAgB,2BAAK;AAC1B,iBAAiB,4BAAM;AACvB,iGAAiG,0BAAI,CAAC,yBAAM,IAAI,iFAAiF,0BAAI,CAAC,kCAAa;AACnN;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL,GAAG;AACH,C;;;;;;;;;;;;;;;ACxP0D;AACR;AACF;AACtB;AACoB;AACA;AACJ;AACJ;AACW;AAClC;AACf;AACA;AACA;AACA;AACA;AACA,wBAAwB,0BAAI,CAAC,0BAAgB;AAC7C;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,sBAAsB,0BAAI,CAAC,uBAAS;AACpC,2BAA2B,2BAAK;AAChC,iBAAiB,+BAAM;AACvB,8BAA8B,0BAAI,CAAC,6BAAU;AAC7C,4BAA4B,0BAAI,CAAC,0BAAgB;AACjD;AACA;AACA,SAAS;AACT;AACA,OAAO,gBAAgB,0BAAI,CAAC,6BAAU;AACtC,4BAA4B,0BAAI,CAAC,0BAAgB;AACjD;AACA;AACA,SAAS;AACT;AACA,OAAO,gBAAgB,0BAAI,CAAC,6BAAU;AACtC,4BAA4B,0BAAI,CAAC,0BAAgB;AACjD;AACA;AACA,SAAS;AACT;AACA,OAAO,gBAAgB,0BAAI,CAAC,6BAAU;AACtC,4BAA4B,0BAAI,CAAC,0BAAgB;AACjD;AACA;AACA,SAAS;AACT;AACA,OAAO;AACP,KAAK;AACL,GAAG;AACH,C;;;;;;;;;;;AC/DkD;AACQ;AACV;AACc;AAChB;AACjB;AACe;AACR;AACwB;AAC5D;AACA;AACe;AACf;AACA;AACA;AACA;;AAEA,kBAAkB,yBAAQ;AAC1B;AACA;;AAEA,gBAAgB,wBAAO;AACvB;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH,kBAAkB,4BAAW;AAC7B;;AAEA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA,wBAAwB,0BAAI,CAAC,0BAAgB;AAC7C;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH,wBAAwB,0BAAI,CAAC,0BAAgB;AAC7C;AACA;AACA,KAAK;AACL;AACA,GAAG;;AAEH;AACA;AACA;AACA,wBAAwB,0BAAI;AAC5B;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA,iBAAiB,wBAAO;AACxB;AACA,uBAAuB,wCAAa;AACpC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA,eAAe;AACf,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA,OAAO,WAAW,uBAAO;;AAEzB,mBAAmB,wCAAa;AAChC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA;;AAEA;AACA,OAAO,WAAW,uBAAO;;AAEzB;AACA;;AAEA;AACA,GAAG;AACH;AACA;;AAEA,sBAAsB,2BAAK,CAAC,uBAAS;AACrC,4BAA4B,0BAAI,CAAC,gCAAa;AAC9C;AACA;AACA;AACA,KAAK,+CAA+C,0BAAI,CAAC,4BAAS;AAClE,0BAA0B,0BAAI,CAAC,0BAAgB;AAC/C;AACA;AACA,OAAO;AACP,2BAA2B,0BAAI,CAAC,0BAAgB;AAChD;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK,2CAA2C,0BAAI,CAAC,4BAAS;AAC9D,0BAA0B,0BAAI,CAAC,0BAAgB;AAC/C;AACA;AACA,OAAO;AACP,2BAA2B,0BAAI,CAAC,0BAAgB;AAChD;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH,C;;;;;;;;;AC3JkD;AACF;AACyE;;AAEzH,SAAS,yBAAO,0BAA0B,gCAAgC,oCAAoC,oDAAoD,8DAA8D,gEAAgE,EAAE,EAAE,gCAAgC,EAAE,aAAa;;AAEnV,SAAS,8BAAa,UAAU,gBAAgB,sBAAsB,OAAO,uDAAuD,aAAa,CAAC,yBAAO,+CAA+C,CAAC,yCAAe,2BAA2B,EAAE,EAAE,EAAE,6CAA6C,2EAA2E,EAAE,OAAO,CAAC,yBAAO,yCAAyC,kFAAkF,EAAE,EAAE,EAAE,EAAE,eAAe;;AAE3c;AAC3B;AACO;AACxB;AACa;AACqC;AAClB;AACJ;AACM;AACb;AACG;AACQ;AACvB;AACE;AACY;AACR;AACoC;AAC5B;;AAEpD;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEe;AACf;;AAEA,mBAAmB,oCAAS;AAC5B;;AAEA,qBAAqB,0CAAe;;AAEpC,kBAAkB,yBAAQ;AAC1B;AACA;;AAEA,mBAAmB,yBAAQ;AAC3B;AACA;;AAEA,kBAAkB,mCAAQ;AAC1B;AACA;;AAEA,mBAAmB,mCAAQ;AAC3B;AACA;AACA,KAAK;AACL;AACA,cAAc,sCAAiB;AAC/B,aAAa,yCAAe,GAAG,EAAE,iCAAY;AAC7C,GAAG;AACH;;AAEA,0BAA0B,4BAAW;AACrC;AACA,wBAAwB,0BAAI;AAC5B;AACA;AACA,KAAK;AACL,GAAG;AACH,qBAAqB,wBAAO;AAC5B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH,kBAAkB,wBAAO;AACzB;AACA,aAAa,wCAAa;AAC1B;;AAEA;AACA;AACA;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA;;AAEA;AACA,OAAO,WAAW,uBAAO;AACzB;;AAEA;AACA,GAAG;AACH,EAAE,0BAAS;AACX;AACA;AACA;AACA,cAAc,8BAAa;AAC3B;AACA,OAAO;AACP;AACA,GAAG;AACH,EAAE,0BAAS;AACX;AACA;AACA;AACA;AACA;AACA,iBAAiB,UAAU,CAAC,wCAAa,cAAc,mCAAc;AACrE;AACA,eAAe,8BAAa,CAAC,8BAAa,GAAG,YAAY;AACzD;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA,sBAAsB,2BAAK,CAAC,uBAAI;AAChC,4BAA4B,0BAAI,CAAC,cAAc;AAC/C;AACA;AACA,YAAY,8BAAa,CAAC,8BAAa,GAAG,mBAAmB;AAC7D;AACA,OAAO;AACP;AACA,KAAK,gBAAgB,0BAAI;AACzB,iBAAiB,kCAAM;AACvB,6BAA6B,0BAAI,CAAC,aAAa;AAC/C;AACA;AACA;AACA,iBAAiB,mCAAc;AAC/B,OAAO;AACP,KAAK,gBAAgB,2BAAK,CAAC,6BAAU;AACrC,8BAA8B,2BAAK,CAAC,6BAAO;AAC3C,gCAAgC,0BAAI,CAAC,gCAAU;AAC/C;AACA;AACA,iCAAiC,0BAAI,CAAC,aAAa;AACnD;AACA;AACA;AACA,WAAW;AACX,SAAS,gBAAgB,0BAAI,CAAC,gCAAU;AACxC;AACA;AACA,iCAAiC,0BAAI,CAAC,WAAW;AACjD;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT,OAAO,gBAAgB,2BAAK,CAAC,6BAAO;AACpC,gCAAgC,0BAAI,CAAC,gCAAU;AAC/C;AACA;AACA,iCAAiC,0BAAI,CAAC,4BAAS;AAC/C,gCAAgC,0BAAI,CAAC,0BAAgB;AACrD;AACA;AACA,aAAa;AACb,iCAAiC,0BAAI,CAAC,0BAAgB;AACtD;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,WAAW;AACX,SAAS,gBAAgB,0BAAI,CAAC,gCAAU;AACxC;AACA;AACA,iCAAiC,0BAAI,CAAC,2BAAQ;AAC9C;AACA,WAAW;AACX,SAAS;AACT,OAAO;AACP,KAAK;AACL,GAAG;AACH,C;;;;;;;;;AC/NkD;AACF;AACtB;AACoB;AACqB;AACf;AACR;AAC7B;AACf,yBAAyB,0CAAe;AACxC;;AAEA;AACA;AACA;;AAEA,sBAAsB,0BAAI;AAC1B,2BAA2B,2BAAK,CAAC,yBAAM;AACvC;AACA,8BAA8B,2BAAK;AACnC,mBAAmB,qBAAM;AACzB,6CAA6C,0BAAI;AACjD,qBAAqB,qBAAM;AAC3B;AACA,SAAS;AACT,OAAO,gBAAgB,2BAAK;AAC5B,mBAAmB,qBAAM;AACzB,gCAAgC,0BAAI;AACpC;AACA,qBAAqB,qBAAM;AAC3B,iCAAiC,0BAAI;AACrC;AACA,WAAW;AACX,SAAS,gBAAgB,0BAAI;AAC7B;AACA,qBAAqB,qBAAM;AAC3B,iCAAiC,0BAAI;AACrC;AACA,WAAW;AACX,SAAS,gBAAgB,0BAAI;AAC7B;AACA,qBAAqB,qBAAM;AAC3B,iCAAiC,0BAAI;AACrC;AACA,WAAW;AACX,SAAS;AACT,OAAO,gBAAgB,0BAAI,CAAC,iBAAiB,IAAI;AACjD,KAAK;AACL,GAAG;AACH,C;;;;;;;;AChDA;AAAA;AAA+C;AAC/C,WAAW,4EAAW;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACsB;AACP,qEAAY,E;;;;;;;ACb3B;AACA,kBAAkB,2F;;;;;;;ACDlB;AACA,kBAAkB,2Z","file":"x","sourcesContent":["import _regeneratorRuntime from \"D:/horizon/admin2/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"D:/horizon/admin2/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { updateUser } from 'redux/actions/user';\nimport { useRouter } from 'next/router';\nimport { get } from 'lib/web';\nexport default function useRequireLogin() {\n  var router = useRouter();\n  var dispatch = useDispatch();\n  var storeUser = useSelector(function (state) {\n    return state.user;\n  });\n\n  var _useState = useState(!storeUser),\n      loading = _useState[0],\n      setLoading = _useState[1];\n\n  var _useState2 = useState(storeUser),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  function loadUser() {\n    return _loadUser.apply(this, arguments);\n  }\n\n  function _loadUser() {\n    _loadUser = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _yield$get, ok, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n              _context.next = 3;\n              return get(\"\".concat(router.basePath, \"/api/auth/verify\"));\n\n            case 3:\n              _yield$get = _context.sent;\n              ok = _yield$get.ok;\n              data = _yield$get.data;\n\n              if (ok) {\n                _context.next = 8;\n                break;\n              }\n\n              return _context.abrupt(\"return\", router.push('/login'));\n\n            case 8:\n              _context.next = 10;\n              return dispatch(updateUser(data));\n\n            case 10:\n              setUser(user);\n              setLoading(false);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _loadUser.apply(this, arguments);\n  }\n\n  useEffect(function () {\n    if (!loading && user) {\n      return;\n    }\n\n    loadUser();\n  }, []);\n  return {\n    user: user,\n    loading: loading\n  };\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"metrics\":\"RealtimeHeader_metrics__3UCe2\"};","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/analysis/realtime\",\n      function () {\n        return require(\"private-next-pages/analysis/realtime.js\");\n      }\n    ]);\n  ","// extracted by mini-css-extract-plugin\nmodule.exports = {\"table\":\"RealtimeLog_table__2Tl9b\",\"header\":\"RealtimeLog_header__2LeBZ\",\"row\":\"RealtimeLog_row__1a7u4\",\"body\":\"RealtimeLog_body__3dkV9\",\"icon\":\"RealtimeLog_icon__3aQPX\",\"time\":\"RealtimeLog_time__PHd3a\",\"website\":\"RealtimeLog_website__1eqHT\",\"detail\":\"RealtimeLog_detail__2LyTK\",\"link\":\"RealtimeLog_link__2ni65\"};","import toInteger from \"../_lib/toInteger/index.js\";\nimport addMinutes from \"../addMinutes/index.js\";\nimport requiredArgs from \"../_lib/requiredArgs/index.js\";\n/**\n * @name subMinutes\n * @category Minute Helpers\n * @summary Subtract the specified number of minutes from the given date.\n *\n * @description\n * Subtract the specified number of minutes from the given date.\n *\n * ### v2.0.0 breaking changes:\n *\n * - [Changes that are common for the whole library](https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#Common-Changes).\n *\n * @param {Date|Number} date - the date to be changed\n * @param {Number} amount - the amount of minutes to be subtracted. Positive decimals will be rounded using `Math.floor`, decimals less than zero will be rounded using `Math.ceil`.\n * @returns {Date} the new date with the minutes subtracted\n * @throws {TypeError} 2 arguments required\n *\n * @example\n * // Subtract 30 minutes from 10 July 2014 12:00:00:\n * const result = subMinutes(new Date(2014, 6, 10, 12, 0), 30)\n * //=> Thu Jul 10 2014 11:30:00\n */\n\nexport default function subMinutes(dirtyDate, dirtyAmount) {\n  requiredArgs(2, arguments);\n  var amount = toInteger(dirtyAmount);\n  return addMinutes(dirtyDate, -amount);\n}","import _defineProperty from \"D:/horizon/admin2/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _objectWithoutProperties from \"D:/horizon/admin2/node_modules/next/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useMemo, useRef } from 'react';\nimport { format, parseISO, startOfMinute, subMinutes, isBefore } from 'date-fns';\nimport PageviewsChart from './PageviewsChart';\nimport { getDateArray } from 'lib/date';\nimport { DEFAULT_ANIMATION_DURATION, REALTIME_RANGE } from 'lib/constants';\n\nfunction mapData(data) {\n  var last = 0;\n  var arr = [];\n  data.reduce(function (obj, val) {\n    var created_at = val.created_at;\n    var t = startOfMinute(parseISO(created_at));\n\n    if (t.getTime() > last) {\n      obj = {\n        t: format(t, 'yyyy-LL-dd HH:mm:00'),\n        y: 1\n      };\n      arr.push(obj);\n      last = t;\n    } else {\n      obj.y += 1;\n    }\n\n    return obj;\n  }, {});\n  return arr;\n}\n\nexport default function RealtimeChart(_ref) {\n  var data = _ref.data,\n      unit = _ref.unit,\n      props = _objectWithoutProperties(_ref, [\"data\", \"unit\"]);\n\n  var endDate = startOfMinute(new Date());\n  var startDate = subMinutes(endDate, REALTIME_RANGE);\n  var prevEndDate = useRef(endDate);\n  var chartData = useMemo(function () {\n    if (data) {\n      return {\n        pageviews: getDateArray(mapData(data.pageviews), startDate, endDate, unit),\n        sessions: getDateArray(mapData(data.sessions), startDate, endDate, unit)\n      };\n    }\n\n    return {\n      pageviews: [],\n      sessions: []\n    };\n  }, [data]); // Don't animate the bars shifting over because it looks weird\n\n  var animationDuration = useMemo(function () {\n    if (isBefore(prevEndDate.current, endDate)) {\n      prevEndDate.current = endDate;\n      return 0;\n    }\n\n    return DEFAULT_ANIMATION_DURATION;\n  }, [data]);\n  return /*#__PURE__*/_jsx(PageviewsChart, _objectSpread(_objectSpread({}, props), {}, {\n    height: 200,\n    unit: unit,\n    data: chartData,\n    animationDuration: animationDuration\n  }));\n}","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgBolt(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 320 512\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M296 160H180.6l42.6-129.8C227.2 15 215.7 0 200 0H56C44 0 33.8 8.9 32.2 20.8l-32 240C-1.7 275.2 9.5 288 24 288h118.7L96.6 482.5c-3.6 15.2 8 29.5 23.3 29.5 8.4 0 16.4-4.4 20.8-12l176-304c9.3-15.9-2.2-36-20.7-36z\"\n  })));\n}\n\nexport default SvgBolt;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgVisitor(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 448 512\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z\"\n  })));\n}\n\nexport default SvgVisitor;","var _path;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgEye(props) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    viewBox: \"0 0 576 512\"\n  }, props), _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M288 144a110.94 110.94 0 00-31.24 5 55.4 55.4 0 017.24 27 56 56 0 01-56 56 55.4 55.4 0 01-27-7.24A111.71 111.71 0 10288 144zm284.52 97.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 000 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 000-29.19zM288 400c-98.65 0-189.09-55-237.93-144C98.91 167 189.34 112 288 112s189.09 55 237.93 144C477.1 345 386.66 400 288 400z\"\n  })));\n}\n\nexport default SvgEye;","import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _toConsumableArray from \"D:/horizon/admin2/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"D:/horizon/admin2/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nvar _TYPE_ICONS;\n\nimport React, { useMemo, useState } from 'react';\nimport { FormattedMessage, useIntl } from 'react-intl';\nimport { FixedSizeList } from 'react-window';\nimport firstBy from 'thenby';\nimport Icon from 'components/common/Icon';\nimport Tag from 'components/common/Tag';\nimport Dot from 'components/common/Dot';\nimport FilterButtons from 'components/common/FilterButtons';\nimport NoData from 'components/common/NoData';\nimport { devices } from 'components/messages';\nimport useLocale from 'hooks/useLocale';\nimport useCountryNames from 'hooks/useCountryNames';\nimport { BROWSERS } from 'lib/constants';\nimport Bolt from 'assets/bolt.svg';\nimport Visitor from 'assets/visitor.svg';\nimport Eye from 'assets/eye.svg';\nimport { stringToColor } from 'lib/format';\nimport { dateFormat } from 'lib/date';\nimport styles from './RealtimeLog.module.css';\nvar TYPE_ALL = 0;\nvar TYPE_PAGEVIEW = 1;\nvar TYPE_SESSION = 2;\nvar TYPE_EVENT = 3;\nvar TYPE_ICONS = (_TYPE_ICONS = {}, _defineProperty(_TYPE_ICONS, TYPE_PAGEVIEW, /*#__PURE__*/_jsx(Eye, {})), _defineProperty(_TYPE_ICONS, TYPE_SESSION, /*#__PURE__*/_jsx(Visitor, {})), _defineProperty(_TYPE_ICONS, TYPE_EVENT, /*#__PURE__*/_jsx(Bolt, {})), _TYPE_ICONS);\nexport default function RealtimeLog(_ref) {\n  var data = _ref.data,\n      websites = _ref.websites,\n      websiteId = _ref.websiteId;\n  var intl = useIntl();\n\n  var _useLocale = useLocale(),\n      locale = _useLocale.locale;\n\n  var countryNames = useCountryNames(locale);\n\n  var _useState = useState(TYPE_ALL),\n      filter = _useState[0],\n      setFilter = _useState[1];\n\n  var logs = useMemo(function () {\n    var pageviews = data.pageviews,\n        sessions = data.sessions,\n        events = data.events;\n    var logs = [].concat(_toConsumableArray(pageviews), _toConsumableArray(sessions), _toConsumableArray(events)).sort(firstBy('created_at', -1));\n\n    if (filter) {\n      return logs.filter(function (row) {\n        return getType(row) === filter;\n      });\n    }\n\n    return logs;\n  }, [data, filter]);\n  var uuids = useMemo(function () {\n    return data.sessions.reduce(function (obj, _ref2) {\n      var session_id = _ref2.session_id,\n          session_uuid = _ref2.session_uuid;\n      obj[session_id] = session_uuid;\n      return obj;\n    }, {});\n  }, [data]);\n  var buttons = [{\n    label: /*#__PURE__*/_jsx(FormattedMessage, {\n      id: \"label.all\",\n      defaultMessage: \"All\"\n    }),\n    value: TYPE_ALL\n  }, {\n    label: /*#__PURE__*/_jsx(FormattedMessage, {\n      id: \"metrics.views\",\n      defaultMessage: \"Views\"\n    }),\n    value: TYPE_PAGEVIEW\n  }, {\n    label: /*#__PURE__*/_jsx(FormattedMessage, {\n      id: \"metrics.visitors\",\n      defaultMessage: \"Visitors\"\n    }),\n    value: TYPE_SESSION\n  }, {\n    label: /*#__PURE__*/_jsx(FormattedMessage, {\n      id: \"metrics.events\",\n      defaultMessage: \"Events\"\n    }),\n    value: TYPE_EVENT\n  }];\n\n  function getType(_ref3) {\n    var view_id = _ref3.view_id,\n        session_id = _ref3.session_id,\n        event_id = _ref3.event_id;\n\n    if (event_id) {\n      return TYPE_EVENT;\n    }\n\n    if (view_id) {\n      return TYPE_PAGEVIEW;\n    }\n\n    if (session_id) {\n      return TYPE_SESSION;\n    }\n\n    return null;\n  }\n\n  function getIcon(row) {\n    return TYPE_ICONS[getType(row)];\n  }\n\n  function getWebsite(_ref4) {\n    var website_id = _ref4.website_id;\n    return websites.find(function (n) {\n      return n.website_id === website_id;\n    });\n  }\n\n  function getDetail(_ref5) {\n    var event_type = _ref5.event_type,\n        event_value = _ref5.event_value,\n        view_id = _ref5.view_id,\n        session_id = _ref5.session_id,\n        url = _ref5.url,\n        browser = _ref5.browser,\n        os = _ref5.os,\n        country = _ref5.country,\n        device = _ref5.device,\n        website_id = _ref5.website_id;\n\n    if (event_type) {\n      return /*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsx(Tag, {\n          children: event_type\n        }), \" \", event_value]\n      });\n    }\n\n    if (view_id) {\n      var _getWebsite;\n\n      var domain = (_getWebsite = getWebsite({\n        website_id: website_id\n      })) === null || _getWebsite === void 0 ? void 0 : _getWebsite.domain;\n      return /*#__PURE__*/_jsx(\"a\", {\n        className: styles.link,\n        href: \"//\".concat(domain).concat(url),\n        target: \"_blank\",\n        rel: \"noreferrer noopener\",\n        children: url\n      });\n    }\n\n    if (session_id) {\n      var _intl$formatMessage;\n\n      return /*#__PURE__*/_jsx(FormattedMessage, {\n        id: \"message.log.visitor\",\n        defaultMessage: \"Visitor from {country} using {browser} on {os} {device}\",\n        values: {\n          country: /*#__PURE__*/_jsx(\"b\", {\n            children: countryNames[country] || intl.formatMessage({\n              id: 'label.unknown',\n              defaultMessage: 'Unknown'\n            })\n          }),\n          browser: /*#__PURE__*/_jsx(\"b\", {\n            children: BROWSERS[browser]\n          }),\n          os: /*#__PURE__*/_jsx(\"b\", {\n            children: os\n          }),\n          device: /*#__PURE__*/_jsx(\"b\", {\n            children: (_intl$formatMessage = intl.formatMessage(devices[device])) === null || _intl$formatMessage === void 0 ? void 0 : _intl$formatMessage.toLowerCase()\n          })\n        }\n      });\n    }\n  }\n\n  function getTime(_ref6) {\n    var created_at = _ref6.created_at;\n    return dateFormat(new Date(created_at), 'pp', locale);\n  }\n\n  function getColor(row) {\n    var session_id = row.session_id;\n    return stringToColor(uuids[session_id] || \"\".concat(session_id).concat(getWebsite(row)));\n  }\n\n  var Row = function Row(_ref7) {\n    var _getWebsite2;\n\n    var index = _ref7.index,\n        style = _ref7.style;\n    var row = logs[index];\n    return /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.row,\n      style: style,\n      children: [/*#__PURE__*/_jsx(\"div\", {\n        children: /*#__PURE__*/_jsx(Dot, {\n          color: getColor(row)\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.time,\n        children: getTime(row)\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.detail,\n        children: [/*#__PURE__*/_jsx(Icon, {\n          className: styles.icon,\n          icon: getIcon(row)\n        }), getDetail(row)]\n      }), !websiteId && websites.length > 1 && /*#__PURE__*/_jsx(\"div\", {\n        className: styles.website,\n        children: (_getWebsite2 = getWebsite(row)) === null || _getWebsite2 === void 0 ? void 0 : _getWebsite2.domain\n      })]\n    });\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.table,\n    children: [/*#__PURE__*/_jsx(FilterButtons, {\n      buttons: buttons,\n      selected: filter,\n      onClick: setFilter\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: styles.header,\n      children: /*#__PURE__*/_jsx(FormattedMessage, {\n        id: \"label.realtime-logs\",\n        defaultMessage: \"Realtime logs\"\n      })\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.body,\n      children: [(logs === null || logs === void 0 ? void 0 : logs.length) === 0 && /*#__PURE__*/_jsx(NoData, {}), (logs === null || logs === void 0 ? void 0 : logs.length) > 0 && /*#__PURE__*/_jsx(FixedSizeList, {\n        height: 400,\n        itemCount: logs.length,\n        itemSize: 40,\n        children: Row\n      })]\n    })]\n  });\n}","import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport PageHeader from '../layout/PageHeader';\nimport DropDown from '../common/DropDown';\nimport MetricCard from './MetricCard';\nimport styles from './RealtimeHeader.module.css';\nexport default function RealtimeHeader(_ref) {\n  var websites = _ref.websites,\n      data = _ref.data,\n      websiteId = _ref.websiteId,\n      onSelect = _ref.onSelect;\n  var options = [{\n    label: /*#__PURE__*/_jsx(FormattedMessage, {\n      id: \"label.all-websites\",\n      defaultMessage: \"All websites\"\n    }),\n    value: 0\n  }].concat(websites.map(function (_ref2, index) {\n    var name = _ref2.name,\n        website_id = _ref2.website_id;\n    return {\n      label: name,\n      value: website_id,\n      divider: index === 0\n    };\n  }));\n  var pageviews = data.pageviews,\n      sessions = data.sessions,\n      events = data.events,\n      countries = data.countries;\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.metrics,\n      children: [/*#__PURE__*/_jsx(MetricCard, {\n        label: /*#__PURE__*/_jsx(FormattedMessage, {\n          id: \"metrics.views\",\n          defaultMessage: \"Views\"\n        }),\n        value: pageviews.length\n      }), /*#__PURE__*/_jsx(MetricCard, {\n        label: /*#__PURE__*/_jsx(FormattedMessage, {\n          id: \"metrics.visitors\",\n          defaultMessage: \"Visitors\"\n        }),\n        value: sessions.length\n      }), /*#__PURE__*/_jsx(MetricCard, {\n        label: /*#__PURE__*/_jsx(FormattedMessage, {\n          id: \"metrics.events\",\n          defaultMessage: \"Events\"\n        }),\n        value: events.length\n      }), /*#__PURE__*/_jsx(MetricCard, {\n        label: /*#__PURE__*/_jsx(FormattedMessage, {\n          id: \"metrics.countries\",\n          defaultMessage: \"Countries\"\n        }),\n        value: countries.length\n      })]\n    })\n  });\n}","import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useMemo, useState, useCallback } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport firstBy from 'thenby';\nimport { percentFilter } from 'lib/filters';\nimport DataTable from './DataTable';\nimport FilterButtons from 'components/common/FilterButtons';\nvar FILTER_REFERRERS = 0;\nvar FILTER_PAGES = 1;\nexport default function RealtimeViews(_ref) {\n  var websiteId = _ref.websiteId,\n      data = _ref.data,\n      websites = _ref.websites;\n  var pageviews = data.pageviews;\n\n  var _useState = useState(FILTER_REFERRERS),\n      filter = _useState[0],\n      setFilter = _useState[1];\n\n  var domains = useMemo(function () {\n    return websites.map(function (_ref2) {\n      var domain = _ref2.domain;\n      return domain;\n    });\n  }, [websites]);\n  var getDomain = useCallback(function (id) {\n    var _websites$, _websites$find;\n\n    return websites.length === 1 ? (_websites$ = websites[0]) === null || _websites$ === void 0 ? void 0 : _websites$.domain : (_websites$find = websites.find(function (_ref3) {\n      var website_id = _ref3.website_id;\n      return website_id === id;\n    })) === null || _websites$find === void 0 ? void 0 : _websites$find.domain;\n  }, [websites]);\n  var buttons = [{\n    label: /*#__PURE__*/_jsx(FormattedMessage, {\n      id: \"metrics.referrers\",\n      defaultMessage: \"Referrers\"\n    }),\n    value: FILTER_REFERRERS\n  }, {\n    label: /*#__PURE__*/_jsx(FormattedMessage, {\n      id: \"metrics.pages\",\n      defaultMessage: \"Pages\"\n    }),\n    value: FILTER_PAGES\n  }];\n\n  var renderLink = function renderLink(_ref4) {\n    var x = _ref4.x;\n    var domain = x.startsWith('/') ? getDomain(websiteId) : '';\n    return /*#__PURE__*/_jsx(\"a\", {\n      href: \"//\".concat(domain).concat(x),\n      target: \"_blank\",\n      rel: \"noreferrer noopener\",\n      children: x\n    });\n  };\n\n  var _useMemo = useMemo(function () {\n    if (pageviews) {\n      var _referrers = percentFilter(pageviews.reduce(function (arr, _ref5) {\n        var referrer = _ref5.referrer;\n\n        if (referrer !== null && referrer !== void 0 && referrer.startsWith('http')) {\n          var hostname = new URL(referrer).hostname.replace(/^www\\./, '');\n\n          if (hostname && !domains.includes(hostname)) {\n            var row = arr.find(function (_ref6) {\n              var x = _ref6.x;\n              return x === hostname;\n            });\n\n            if (!row) {\n              arr.push({\n                x: hostname,\n                y: 1\n              });\n            } else {\n              row.y += 1;\n            }\n          }\n        }\n\n        return arr;\n      }, []).sort(firstBy('y', -1)));\n\n      var _pages = percentFilter(pageviews.reduce(function (arr, _ref7) {\n        var _url;\n\n        var url = _ref7.url,\n            website_id = _ref7.website_id;\n\n        if ((_url = url) !== null && _url !== void 0 && _url.startsWith('/')) {\n          if (!websiteId && websites.length > 1) {\n            url = \"\".concat(getDomain(website_id)).concat(url);\n          }\n\n          var row = arr.find(function (_ref8) {\n            var x = _ref8.x;\n            return x === url;\n          });\n\n          if (!row) {\n            arr.push({\n              x: url,\n              y: 1\n            });\n          } else {\n            row.y += 1;\n          }\n        }\n\n        return arr;\n      }, []).sort(firstBy('y', -1)));\n\n      return [_referrers, _pages];\n    }\n\n    return [];\n  }, [pageviews]),\n      referrers = _useMemo[0],\n      pages = _useMemo[1];\n\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(FilterButtons, {\n      buttons: buttons,\n      selected: filter,\n      onClick: setFilter\n    }), filter === FILTER_REFERRERS && /*#__PURE__*/_jsx(DataTable, {\n      title: /*#__PURE__*/_jsx(FormattedMessage, {\n        id: \"metrics.referrers\",\n        defaultMessage: \"Referrers\"\n      }),\n      metric: /*#__PURE__*/_jsx(FormattedMessage, {\n        id: \"metrics.views\",\n        defaultMessage: \"Views\"\n      }),\n      data: referrers,\n      height: 400\n    }), filter === FILTER_PAGES && /*#__PURE__*/_jsx(DataTable, {\n      title: /*#__PURE__*/_jsx(FormattedMessage, {\n        id: \"metrics.pages\",\n        defaultMessage: \"Pages\"\n      }),\n      metric: /*#__PURE__*/_jsx(FormattedMessage, {\n        id: \"metrics.views\",\n        defaultMessage: \"Views\"\n      }),\n      renderLabel: renderLink,\n      data: pages,\n      height: 400\n    })]\n  });\n}","import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _defineProperty from \"D:/horizon/admin2/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport { FormattedMessage } from 'react-intl';\nimport { subMinutes, startOfMinute } from 'date-fns';\nimport firstBy from 'thenby';\nimport Page from 'components/layout/Page';\nimport GridLayout, { GridRow, GridColumn } from 'components/layout/GridLayout';\nimport RealtimeChart from 'components/metrics/RealtimeChart';\nimport RealtimeLog from 'components/metrics/RealtimeLog';\nimport RealtimeHeader from 'components/metrics/RealtimeHeader';\nimport WorldMap from 'components/common/WorldMap';\nimport DataTable from 'components/metrics/DataTable';\nimport RealtimeViews from 'components/metrics/RealtimeViews';\nimport useFetch from 'hooks/useFetch';\nimport useLocale from 'hooks/useLocale';\nimport useCountryNames from 'hooks/useCountryNames';\nimport { percentFilter } from 'lib/filters';\nimport { TOKEN_HEADER, REALTIME_RANGE, REALTIME_INTERVAL } from 'lib/constants';\nimport styles from './RealtimeDashboard.module.css';\n\nfunction mergeData(state, data, time) {\n  var ids = state.map(function (_ref) {\n    var __id = _ref.__id;\n    return __id;\n  });\n  return state.concat(data.filter(function (_ref2) {\n    var __id = _ref2.__id;\n    return !ids.includes(__id);\n  })).filter(function (_ref3) {\n    var created_at = _ref3.created_at;\n    return new Date(created_at).getTime() >= time;\n  });\n}\n\nfunction filterWebsite(data, id) {\n  return data.filter(function (_ref4) {\n    var website_id = _ref4.website_id;\n    return website_id === id;\n  });\n}\n\nexport default function RealtimeDashboard() {\n  var _init$websites;\n\n  var _useLocale = useLocale(),\n      locale = _useLocale.locale;\n\n  var countryNames = useCountryNames(locale);\n\n  var _useState = useState(),\n      data = _useState[0],\n      setData = _useState[1];\n\n  var _useState2 = useState(0),\n      websiteId = _useState2[0],\n      setWebsiteId = _useState2[1];\n\n  var _useFetch = useFetch('/api/realtime/init'),\n      init = _useFetch.data,\n      loading = _useFetch.loading;\n\n  var _useFetch2 = useFetch('/api/realtime/update', {\n    params: {\n      start_at: data === null || data === void 0 ? void 0 : data.timestamp\n    },\n    disabled: !(init !== null && init !== void 0 && (_init$websites = init.websites) !== null && _init$websites !== void 0 && _init$websites.length) || !data,\n    interval: REALTIME_INTERVAL,\n    headers: _defineProperty({}, TOKEN_HEADER, init === null || init === void 0 ? void 0 : init.token)\n  }),\n      updates = _useFetch2.data;\n\n  var renderCountryName = useCallback(function (_ref5) {\n    var x = _ref5.x;\n    return /*#__PURE__*/_jsx(\"span\", {\n      className: locale,\n      children: countryNames[x]\n    });\n  }, [countryNames]);\n  var realtimeData = useMemo(function () {\n    if (data) {\n      var pageviews = data.pageviews,\n          sessions = data.sessions,\n          events = data.events;\n\n      if (websiteId) {\n        return {\n          pageviews: filterWebsite(pageviews, websiteId),\n          sessions: filterWebsite(sessions, websiteId),\n          events: filterWebsite(events, websiteId)\n        };\n      }\n    }\n\n    return data;\n  }, [data, websiteId]);\n  var countries = useMemo(function () {\n    if (realtimeData !== null && realtimeData !== void 0 && realtimeData.sessions) {\n      return percentFilter(realtimeData.sessions.reduce(function (arr, _ref6) {\n        var country = _ref6.country;\n\n        if (country) {\n          var row = arr.find(function (_ref7) {\n            var x = _ref7.x;\n            return x === country;\n          });\n\n          if (!row) {\n            arr.push({\n              x: country,\n              y: 1\n            });\n          } else {\n            row.y += 1;\n          }\n        }\n\n        return arr;\n      }, []).sort(firstBy('y', -1)));\n    }\n\n    return [];\n  }, [realtimeData === null || realtimeData === void 0 ? void 0 : realtimeData.sessions]);\n  useEffect(function () {\n    if (init && !data) {\n      var _websites = init.websites,\n          _data = init.data;\n      setData(_objectSpread({\n        websites: _websites\n      }, _data));\n    }\n  }, [init]);\n  useEffect(function () {\n    if (updates) {\n      var pageviews = updates.pageviews,\n          sessions = updates.sessions,\n          events = updates.events,\n          timestamp = updates.timestamp;\n      var time = subMinutes(startOfMinute(new Date()), REALTIME_RANGE).getTime();\n      setData(function (state) {\n        return _objectSpread(_objectSpread({}, state), {}, {\n          pageviews: mergeData(state.pageviews, pageviews, time),\n          sessions: mergeData(state.sessions, sessions, time),\n          events: mergeData(state.events, events, time),\n          timestamp: timestamp\n        });\n      });\n    }\n  }, [updates]);\n\n  if (!init || !data || loading) {\n    return null;\n  }\n\n  var websites = data.websites;\n  return /*#__PURE__*/_jsxs(Page, {\n    children: [/*#__PURE__*/_jsx(RealtimeHeader, {\n      websites: websites,\n      websiteId: websiteId,\n      data: _objectSpread(_objectSpread({}, realtimeData), {}, {\n        countries: countries\n      }),\n      onSelect: setWebsiteId\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: styles.chart,\n      children: /*#__PURE__*/_jsx(RealtimeChart, {\n        websiteId: websiteId,\n        data: realtimeData,\n        unit: \"minute\",\n        records: REALTIME_RANGE\n      })\n    }), /*#__PURE__*/_jsxs(GridLayout, {\n      children: [/*#__PURE__*/_jsxs(GridRow, {\n        children: [/*#__PURE__*/_jsx(GridColumn, {\n          xs: 12,\n          lg: 4,\n          children: /*#__PURE__*/_jsx(RealtimeViews, {\n            websiteId: websiteId,\n            data: realtimeData,\n            websites: websites\n          })\n        }), /*#__PURE__*/_jsx(GridColumn, {\n          xs: 12,\n          lg: 8,\n          children: /*#__PURE__*/_jsx(RealtimeLog, {\n            websiteId: websiteId,\n            data: realtimeData,\n            websites: websites\n          })\n        })]\n      }), /*#__PURE__*/_jsxs(GridRow, {\n        children: [/*#__PURE__*/_jsx(GridColumn, {\n          xs: 12,\n          lg: 4,\n          children: /*#__PURE__*/_jsx(DataTable, {\n            title: /*#__PURE__*/_jsx(FormattedMessage, {\n              id: \"metrics.countries\",\n              defaultMessage: \"Countries\"\n            }),\n            metric: /*#__PURE__*/_jsx(FormattedMessage, {\n              id: \"metrics.visitors\",\n              defaultMessage: \"Visitors\"\n            }),\n            data: countries,\n            renderLabel: renderCountryName,\n            height: 500\n          })\n        }), /*#__PURE__*/_jsx(GridColumn, {\n          xs: 12,\n          lg: 8,\n          children: /*#__PURE__*/_jsx(WorldMap, {\n            data: countries\n          })\n        })]\n      })]\n    })]\n  });\n}","import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from 'react';\nimport Layout from 'components/layout/Layout';\nimport RealtimeDashboard from 'components/pages/RealtimeDashboard';\nimport useRequireLogin from 'hooks/useRequireLogin';\nimport styles from 'styles/Home.module.css';\nexport default function RealtimePage() {\n  var _useRequireLogin = useRequireLogin(),\n      loading = _useRequireLogin.loading;\n\n  if (loading) {\n    return null;\n  }\n\n  return /*#__PURE__*/_jsx(\"div\", {\n    children: /*#__PURE__*/_jsxs(Layout, {\n      headerType: \"analysis\",\n      children: [/*#__PURE__*/_jsxs(\"h1\", {\n        className: styles.title,\n        children: [\"Analysis \", /*#__PURE__*/_jsx(\"span\", {\n          className: styles.orange,\n          children: \"Realtime\"\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        className: styles.flex,\n        children: [/*#__PURE__*/_jsx(\"a\", {\n          href: \"/\",\n          className: styles.card,\n          children: /*#__PURE__*/_jsx(\"h2\", {\n            children: \"\\u2190 Home\"\n          })\n        }), /*#__PURE__*/_jsx(\"a\", {\n          href: \"/analysis\",\n          className: styles.card,\n          children: /*#__PURE__*/_jsx(\"h2\", {\n            children: \"\\u2190 Analysis\"\n          })\n        }), /*#__PURE__*/_jsx(\"a\", {\n          href: \"/analysis/dashboard\",\n          className: styles.card,\n          children: /*#__PURE__*/_jsx(\"h2\", {\n            children: \"Dashboard \\u2192\"\n          })\n        })]\n      }), /*#__PURE__*/_jsx(RealtimeDashboard, {})]\n    })\n  });\n}","import { createSlice } from '@reduxjs/toolkit';\nvar user = createSlice({\n  name: 'user',\n  initialState: null,\n  reducers: {\n    updateUser: function updateUser(state, action) {\n      state = action.payload;\n      return state;\n    }\n  }\n});\nvar updateUser = user.actions.updateUser;\nexport { updateUser };\nexport default user.reducer;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"RealtimeDashboard_container__1ZLx1\",\"chart\":\"RealtimeDashboard_chart__1LaXv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"orange\":\"Home_orange__2Ws-k\",\"container\":\"Home_container__1EcsU\",\"main\":\"Home_main__1x8gC\",\"footer\":\"Home_footer__1WdhD\",\"title\":\"Home_title__3DjR7\",\"description\":\"Home_description__17Z4F\",\"code\":\"Home_code__axx2Y\",\"grid\":\"Home_grid__2Ei2F\",\"flex\":\"Home_flex__-Lep2\",\"card\":\"Home_card__2SdtB\",\"card45\":\"Home_card45__TeeSF\",\"card25\":\"Home_card25__1Uh8X\",\"card75\":\"Home_card75__26Ifx\",\"logo\":\"Home_logo__1YbrH\"};"]}}